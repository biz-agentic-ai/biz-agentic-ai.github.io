---
title: "왜 DataNexus를 만드는가"
date: 2026-02-16
draft: false
summary: "엔터프라이즈 데이터 분석의 문제를 풀기 위해 온톨로지 기반 데이터 에이전트를 설계하기 시작한 이유."
categories: ["architecture"]
tags: ["datanexus", "ontology", "nl2sql", "graphrag"]
series: ["datanexus-building-log"]
series_order: 1
ShowToc: false
---

## 풀려는 문제

대기업 데이터 조직에서 10년 넘게 일하면서 반복적으로 본 장면이 있다.

현업이 "지난달 VIP 고객 매출이 얼마야?"라고 물으면, 분석가가 "VIP 기준이 뭐죠?"라고 되묻는다. 같은 회사인데 마케팅의 VIP와 CRM의 VIP가 다르다. 매출도 순매출인지 총매출인지에 따라 숫자가 달라진다. 결국 한 줄짜리 질문에 2~3일이 걸린다.

이 문제의 본질은 SQL 작성 능력이 아니라 **맥락의 부재**다. 테이블과 컬럼은 있는데, 그게 비즈니스에서 무슨 의미인지 어디에도 정의되어 있지 않다.

## NL2SQL만으로는 안 된다

요즘 NL2SQL 도구가 많다. 자연어를 SQL로 바꿔주는 건 이미 가능하다. 문제는 정확도다.

벤치마크에서 80% 넘는 도구도, 실제 기업 환경에 넣으면 40~50%로 떨어진다. 이유는 단순하다. 벤치마크 데이터베이스는 컬럼명이 `customer_name`처럼 직관적이지만, 실제 DW에는 `T_CUST_MST.CUST_NM`같은 약어 테이블이 수백 개 있다. LLM이 이걸 보고 맥락을 파악할 수 없다.

그래서 온톨로지가 필요하다.

## 온톨로지라는 선택

온톨로지는 거창한 개념이 아니다. "순매출 = 총매출 - 반품 - 에누리"라는 정의를 구조화해서 기계가 읽을 수 있게 만드는 것이다. DataHub의 Business Glossary에 이런 용어를 정의하고, 그 정의를 NL2SQL 엔진(Vanna)과 문서검색 엔진(ApeRAG)에 동기화하면, LLM이 "순매출"이라는 단어를 봤을 때 어떤 테이블의 어떤 컬럼을 어떤 계산식으로 조합해야 하는지 알 수 있다.

이게 DataNexus의 핵심 아이디어다.

```
[사용자: "지난달 VIP 매출 알려줘"]
       │
       ▼
[온톨로지 조회]
  - VIP고객 = CUST_GRD_CD IN ('V1','V2')
  - 매출 = 순매출 = SUM(SALE_AMT) - SUM(RTN_AMT)
       │
       ▼
[NL2SQL: 정확한 SQL 생성]
       │
       ▼
[결과 + 해석 반환]
```

## 방어선에 대한 생각

솔직히 말하면, 이 프로젝트에는 기술적 동기만 있는 게 아니다.

LLM이 빠르게 범용화되면서, 단순 기획이나 문서 생성 같은 업무는 빠르게 대체될 가능성이 높다. 하지만 기업 내부의 암묵적 지식 - 같은 매출 데이터를 CMO와 PM이 다르게 해석하는 맥락, 비공개 운영 데이터, 시간축을 가진 분석 패턴 - 이런 건 외부 모델이 학습할 수 없다.

DataNexus가 노리는 건 이 영역이다. Non-verifiable Domain + Proprietary Data. 이 방어선이 영구적이지 않다는 것도 안다. 그래서 데이터 축적 속도가 모델의 일반화 속도보다 빨라야 한다. 그 속도 우위를 구조적으로 만드는 것이 온톨로지 기반 지식 그래프 설계의 목적이다.

## 다음 글에서

아키텍처를 구성하는 4개 오픈소스(DataHub, Vanna, ApeRAG, DozerDB)를 이 조합으로 결정하기까지의 과정을 정리할 예정이다.

---

*이 시리즈는 DataNexus를 설계하고 구축하는 과정을 기록합니다. [GitHub](https://github.com/biz-agentic-ai) | [LinkedIn](https://www.linkedin.com/in/leejuno/)*
