<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>3. DataHub Glossary를 온톨로지로 쓸 수 있을까 | Junho Lee | DataNexus 구축 과정</title><meta name=keywords content="datanexus,datahub,dozerdb,til"><meta name=description content="DataHub의 Business Glossary를 온톨로지 저장소로 쓰려고 했다. 되는 것과 안 되는 것, 그리고 우회한 방법."><meta name=author content="Junho Lee"><link rel=canonical href=https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/><link crossorigin=anonymous href=/assets/css/stylesheet.021ac5ca30dbac432a97043f4aad13c803b88230b05169edf850b41f39658032.css integrity="sha256-AhrFyjDbrEMqlwQ/Sq0TyAO4gjCwUWnt+FC0HzllgDI=" rel="preload stylesheet" as=style><link rel=icon href=https://biz-agentic-ai.github.io/favicon.svg><link rel=icon type=image/svg+xml sizes=16x16 href=https://biz-agentic-ai.github.io/favicon.svg><link rel=icon type=image/svg+xml sizes=32x32 href=https://biz-agentic-ai.github.io/favicon.svg><link rel=apple-touch-icon href=https://biz-agentic-ai.github.io/favicon.svg><link rel=mask-icon href=https://biz-agentic-ai.github.io/favicon.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@biz_agentic_ai"><meta name=twitter:creator content="@biz_agentic_ai"><meta name=googlebot content="index, follow"><meta name=bingbot content="index, follow"><meta name=slurp content="index, follow"><meta name=language content="ko"><meta name=geo.region content="KR"><meta name=geo.placename content="Seoul"><meta property="og:type" content="article"><meta property="og:site_name" content="Junho Lee | DataNexus 구축 과정"><meta property="og:locale" content="ko_KR"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"3. DataHub Glossary를 온톨로지로 쓸 수 있을까","description":"DataHub의 Business Glossary를 온톨로지 저장소로 쓰려고 했다. 되는 것과 안 되는 것, 그리고 우회한 방법.","image":"","author":{"@type":"Person","name":"Junho Lee"},"publisher":{"@type":"Organization","name":"Junho Lee | DataNexus 구축 과정","logo":{"@type":"ImageObject","url":"https:\/\/biz-agentic-ai.github.io\/favicon.svg"}},"datePublished":"2026-02-18T00:00:00Z","dateModified":"2026-02-18T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/biz-agentic-ai.github.io\/posts\/datanexus\/003-datahub-glossary-as-ontology\/"}}</script><style>:root{--sidebar-width:260px;--sidebar-bg:#1a1a2e;--sidebar-text:#e0e0e0;--sidebar-accent:#667eea;--sidebar-hover:rgba(102, 126, 234, 0.15);--sidebar-active-bg:linear-gradient(135deg, #667eea 0%, #764ba2 100%)}html{font-size:15px}.first-entry{min-height:240px}.first-entry .entry-header h1{font-size:24px}.first-entry .entry-content{font-size:14px}.home-info .entry-content{font-size:14px}.entry-header h2{font-size:20px}.entry-content{font-size:13px}.post-title,.post-single .post-title{font-size:26px}.post-content{font-size:15px;line-height:1.75}.post-content h1{font-size:24px}.post-content h2{font-size:21px}.post-content h3{font-size:18px}.post-content h4{font-size:16px}.post-meta{font-size:13px}.toc a{font-size:13px}.header{display:none}.site-wrapper{--header-height:0px}.main{padding-top:8px}.first-entry{margin-top:0}.sidebar{position:fixed;top:0;left:0;width:var(--sidebar-width);height:100vh;background:var(--sidebar-bg);color:var(--sidebar-text);z-index:100;overflow-y:auto;transition:transform .3s ease}.sidebar-inner{display:flex;flex-direction:column;height:100%;padding:24px 0}.sidebar-header{padding:0 20px 20px;border-bottom:1px solid rgba(255,255,255,8%);margin-bottom:8px}.sidebar-logo{display:flex;align-items:center;gap:8px;font-size:1.3rem;font-weight:700;color:#fff;text-decoration:none;letter-spacing:-.02em}.sidebar-logo-img{width:28px;height:28px;border-radius:6px;object-fit:cover}.home-logo-img{width:42px;height:42px;border-radius:8px;object-fit:cover;vertical-align:middle;margin-right:8px}.sidebar-logo:hover{opacity:.85}.sidebar-subtitle{display:block;font-size:.75rem;color:rgba(255,255,255,.4);margin-top:2px;letter-spacing:.02em}.sidebar-nav ul,.sidebar-section ul{list-style:none;padding:0;margin:0}.sidebar-nav{padding:8px 0}.sidebar-nav li a,.sidebar-section li a{display:block;padding:9px 20px;color:var(--sidebar-text);text-decoration:none;font-size:.88rem;border-left:3px solid transparent;transition:all .2s}.sidebar-nav li a:hover,.sidebar-section li a:hover{background:var(--sidebar-hover);border-left-color:var(--sidebar-accent);color:#fff}.sidebar-nav li a.active{background:var(--sidebar-active-bg);color:#fff;border-left-color:transparent;font-weight:600;border-radius:0 20px 20px 0;margin-right:12px}.sidebar-section li a.active{color:var(--sidebar-accent);font-weight:600;border-left-color:var(--sidebar-accent)}.sidebar-section{padding:8px 0;border-top:1px solid rgba(255,255,255,8%);margin-top:4px}.sidebar-section-title{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:rgba(255,255,255,.4);padding:8px 20px;margin:0;font-weight:600}.sidebar-section li a{font-size:.82rem;padding:7px 20px;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-footer{margin-top:auto;padding:16px 20px;border-top:1px solid rgba(255,255,255,8%)}.sidebar-footer button{display:inline-flex;align-items:center;gap:8px;background:0 0;border:1px solid rgba(255,255,255,.15);color:var(--sidebar-text);padding:6px 14px;border-radius:8px;cursor:pointer;font-size:.78rem;transition:all .2s;width:100%;justify-content:center}.sidebar-footer button:hover{background:rgba(255,255,255,8%);border-color:var(--sidebar-accent)}body.dark .sidebar-footer #sidebar-sun{display:inline-block}body.dark .sidebar-footer #sidebar-moon{display:none}body:not(.dark) .sidebar-footer #sidebar-sun{display:none}body:not(.dark) .sidebar-footer #sidebar-moon{display:inline-block}.sidebar-stats{padding:10px 20px;border-top:1px solid rgba(255,255,255,8%);margin-top:4px;display:none;flex-direction:column;gap:6px}.sidebar-stat-pill{display:flex;align-items:center;gap:8px;padding:0 2px;height:28px}.stat-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}.stat-dot--pv{background:#667eea}.stat-dot--uv{background:#f5576c}.sidebar-stat-value{font-weight:600;font-size:.85rem;color:rgba(255,255,255,.9);font-variant-numeric:tabular-nums}.sidebar-stat-label{font-size:.7rem;color:rgba(255,255,255,.3)}.sidebar-dashboard-links{padding:8px 20px;display:none;flex-direction:column;gap:5px}.sidebar-dashboard-links.visible{display:flex}.sidebar-stats.visible{display:flex}.sidebar-dashboard-links a{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;font-size:.7rem;white-space:nowrap;color:rgba(255,255,255,.5);text-decoration:none;border:1px solid rgba(255,255,255,.1);border-radius:6px;transition:all .2s}.sidebar-dashboard-links a:hover{color:#fff;background:var(--sidebar-hover);border-color:var(--sidebar-accent)}.site-wrapper{margin-left:var(--sidebar-width);min-height:100vh}.sidebar-toggle{display:none;position:fixed;bottom:20px;left:20px;z-index:101;background:var(--sidebar-active-bg);color:#fff;border:none;border-radius:50%;width:48px;height:48px;cursor:pointer;box-shadow:0 4px 14px rgba(102,126,234,.4);align-items:center;justify-content:center;transition:transform .2s}.sidebar-toggle:hover{transform:scale(1.08)}.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:99;backdrop-filter:blur(2px)}@media(max-width:860px){.sidebar{transform:translateX(-100%)}.sidebar.open{transform:translateX(0)}.sidebar-toggle{display:flex}.sidebar-overlay.open{display:block}.site-wrapper{margin-left:0}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0RS9ZG67P"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Q0RS9ZG67P")}</script><meta property="og:url" content="https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/"><meta property="og:site_name" content="Junho Lee | DataNexus 구축 과정"><meta property="og:title" content="3. DataHub Glossary를 온톨로지로 쓸 수 있을까"><meta property="og:description" content="DataHub의 Business Glossary를 온톨로지 저장소로 쓰려고 했다. 되는 것과 안 되는 것, 그리고 우회한 방법."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-18T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-18T00:00:00+00:00"><meta property="article:tag" content="Datanexus"><meta property="article:tag" content="Datahub"><meta property="article:tag" content="Dozerdb"><meta property="article:tag" content="Til"><meta property="og:see_also" content="https://biz-agentic-ai.github.io/posts/datanexus/004-skos-compatibility-layer/"><meta property="og:see_also" content="https://biz-agentic-ai.github.io/posts/datanexus/002-architecture-decisions/"><meta name=twitter:card content="summary"><meta name=twitter:title content="3. DataHub Glossary를 온톨로지로 쓸 수 있을까"><meta name=twitter:description content="DataHub의 Business Glossary를 온톨로지 저장소로 쓰려고 했다. 되는 것과 안 되는 것, 그리고 우회한 방법."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://biz-agentic-ai.github.io/posts/"},{"@type":"ListItem","position":2,"name":"3. DataHub Glossary를 온톨로지로 쓸 수 있을까","item":"https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"3. DataHub Glossary를 온톨로지로 쓸 수 있을까","name":"3. DataHub Glossary를 온톨로지로 쓸 수 있을까","description":"DataHub의 Business Glossary를 온톨로지 저장소로 쓰려고 했다. 되는 것과 안 되는 것, 그리고 우회한 방법.","keywords":["datanexus","datahub","dozerdb","til"],"articleBody":"\rGoogle Colab에서 실습하기\r왜 Glossary를 온톨로지로 쓰려 했나 DataNexus의 핵심 아이디어는 단순하다. 비즈니스 용어 사이의 관계를 그래프로 정의해두면, NL2SQL 엔진이 그 그래프를 참조해서 자연어를 SQL로 바꿀 수 있다. 이 그래프가 온톨로지다.\n온톨로지라고 하면 학술 논문에나 나올 것 같은데, 실체는 별거 없다. “순매출은 매출의 한 종류다(IsA)”, “매출은 총매출, 반품, 에누리를 포함한다(HasA)”. 사람 머릿속에 있는 업무 지식을 기계가 읽을 수 있게 옮긴 것뿐이다.\n이걸 어디에 저장할지가 고민이었다. 온톨로지 전용 시스템을 하나 더 띄우면 관리 포인트가 늘어난다. 이미 DataHub를 메타데이터 플랫폼으로 쓰고 있었고, 거기 Business Glossary가 딸려 있었다. 용어 등록, 관계 설정 다 된다. 이전 글에서 Glossary의 관계 4종(IsA, HasA, RelatedTo, Values)이면 비즈니스 용어 계층구조를 충분히 표현할 수 있다고 봤었다.\n시스템 하나를 줄일 수 있다는 게 매력적이었다. GraphQL API로 프로그래밍 접근도 되고, 용어가 변경되면 Kafka MCL(Metadata Change Log) 이벤트가 자동으로 나간다. 나쁘지 않은 출발점이었다.\nGlossary에 용어를 넣기 시작했다 DataHub 세팅하고 제일 먼저 한 게 Glossary Term 등록이었다. “순매출 IsA 매출”, “매출 HasA 총매출, 반품, 에누리”. 이런 식으로 용어를 넣고 관계를 걸었다.\n기본 계층구조는 깔끔하게 들어갔다. 매출 → 총매출, 순매출 → 실매출.\n문제는 그 다음이었다.\n관계 4종의 한계: “공장과 제품” 실제 업무 데이터를 모델링하면서 벽에 부딪혔다.\n“A 공장에서 생산된 B 제품\"과 “A 공장에 재고가 있는 B 제품”. 둘 다 공장과 제품 사이의 관계인데, 하나는 생산(Manufactures), 하나는 재고(Stocks)다. 의미가 완전히 다르다.\nDataHub Glossary에서 이걸 표현하면? 둘 다 RelatedTo가 된다. “공장 RelatedTo 제품\"이 두 개 생기는데, 어느 게 생산이고 어느 게 재고인지 구분할 방법이 없다.\n이게 왜 치명적이냐면—DataNexus의 NL2SQL 엔진이 온톨로지를 보고 SQL을 만들기 때문이다. “A 공장에서 생산된 제품 목록 보여줘\"라는 질문이 들어오면, 엔진은 공장-제품 관계를 찾아서 해당 테이블과 JOIN 경로를 결정한다.\n사용자 질문: “A 공장에서 생산된 제품은?\"\n온톨로지 조회: 공장 → RelatedTo → 제품 (생산? 재고? 알 수 없음)\n→ LLM이 production 테이블 대신 inventory 테이블을 JOIN할 수 있음 → 잘못된 결과 반환\n관계 유형이 RelatedTo 하나뿐이니 엔진한테는 판단 근거가 없다. 잘못된 JOIN을 타면 사용자에게 엉뚱한 데이터가 나간다.\n확장하려면 재배포가 필요하다 DataHub에서 관계를 세분화하면 되지 않느냐. 안 된다.\nPDL(Persona Data Language)로 새 Aspect를 정의하고, @Relationship 어노테이션으로 관계 유형을 선언하고, DataHub를 빌드해서 재배포해야 한다. 관계 유형 하나 추가할 때마다 이 사이클을 돌려야 한다.\n비즈니스 모델링을 하다 보면 관계는 계속 늘어난다. “공급(Supplies)”, “검수(Inspects)”, “반품(Returns)”… 업무 맥락에 따라 수십 가지가 필요해지는데, 하나마다 코드 고치고 재배포하는 건 현실적이지 않다.\n파고 들어가니 더 나왔다 관계 유형만 문제가 아니었다.\n동의어 충돌 “순매출\"과 “실매출\"을 동의어로 등록했다. 같은 개념인데 이름만 다른 경우다. 그런데 두 용어 모두 “Net Sales\"라는 영문 동의어를 갖고 있었다. 하나의 영문명에 한글 용어 두 개가 매핑된 상황—DataHub는 이걸 그냥 넘긴다. 경고도 없다.\nNL2SQL에서 동의어 매핑이 꼬이면 엔진이 엉뚱한 용어를 참조한다. 용어가 수백 개를 넘어가면 이런 충돌을 사람 눈으로 잡을 수 없다. 커스텀 검증 로직을 따로 짜야 한다는 뜻이다.\n시각화 DataHub UI는 데이터 계보(Lineage) 탐색에 맞춰져 있다. 테이블 A → 테이블 B로 데이터가 흐르는 방향성 있는 트리.\n온톨로지는 구조가 다르다. 노드 수십~수백 개가 다대다로 엮인 그물망이다. “제품\"이 “공장”, “창고”, “거래처”, “카테고리\"와 전부 다른 관계로 연결되어 있고, 그 노드들끼리 또 서로 물려 있다. DataHub에는 이런 그래프를 탐색할 화면 자체가 없다.\n만들어 놓고 전체 그림을 못 보면 관리가 안 된다.\n관계에 속성을 붙일 수 없다 이게 제일 문제였다.\nDataHub Glossary에서 “A RelatedTo B\"를 설정하면 그 관계에 아무것도 더 달 수 없다. 실무에서는 관계 자체에 정보가 필요한 경우가 많다.\n신뢰도(confidence) 가 대표적이다. 자동 추출된 관계는 0.7, 전문가가 직접 정의한 관계는 0.95—이 차이를 NL2SQL 엔진이 알아야 한다. 유효 기간(temporal) 도 마찬가지다. 조직 개편으로 부서-제품 매핑이 바뀌면, “이 관계가 언제부터 언제까지 유효한지\"를 추적해야 한다. 카디널리티(cardinality) 는 JOIN 전략에 직접 영향을 준다.\n조직 개편으로 부서-제품 매핑이 바뀌면, 과거 시점 조직 구조로 현재 데이터를 조회하게 된다. 리포트 수치가 안 맞는 전형적인 원인이다. 관계에 시간축이 없으면 이걸 막을 방법이 없다.\n정리: 되는 것과 안 되는 것 되는 것 안 되는 것 용어 정의 (name, definition) 세분화된 관계 유형 (MANUFACTURES, STOCKS 등) 동의어 등록 (커스텀 필드) 동의어 중복/충돌 자동 감지 4종 관계 (IsA, HasA, RelatedTo, Values) 관계에 속성 부여 (신뢰도, 유효 기간) GraphQL API로 프로그래밍 접근 복잡한 그래프 탐색 UI Kafka MCL 이벤트 스트림 재배포 없는 실시간 관계 유형 확장 DataHub Glossary는 용어 사전으로서는 쓸 만하다. 온톨로지 저장소로는 표현력이 모자랐다.\n역할을 나눴다: DataHub + DozerDB Glossary를 통째로 버리는 건 답이 아니었다. 용어 정의의 원천(Source of Truth)으로 DataHub를 대체할 게 없다. GraphQL API, Kafka MCL 이벤트—이 인프라를 다른 도구에서 바닥부터 만드는 건 시간 낭비다.\n각자 잘하는 걸 맡겼다.\nDataHub Glossary → 용어 정의와 기본 관계의 원천 (Source of Truth) DozerDB → 세분화된 관계, 속성 달린 엣지, 그래프 추론 담당 DozerDB를 고른 건 Cypher 쿼리를 쓸 수 있어서다. 관계(엣지)에 속성을 자유롭게 붙일 수 있고, 관계 유형을 추가할 때 스키마 변경이나 재배포가 필요 없다.\n동기화 흐름은 단순하다. DataHub에서 Glossary Term이 바뀌면 Kafka MCL 이벤트가 나간다. 이벤트를 구독하는 Consumer가 DozerDB 온톨로지 그래프에 반영한다. 이름이나 정의 같은 기본 정보는 DataHub가 쥐고 있고, DozerDB는 그 위에 세분화된 관계와 속성을 얹는다.\nDozerDB에서의 관계 정의 아까 문제됐던 “공장-제품” 관계가 DozerDB에서는 이렇게 풀린다.\n// 엔티티 생성 (DataHub에서 동기화된 용어) CREATE (factory:Entity {name: 'A공장', type: 'Factory'}) CREATE (product:Entity {name: 'B제품', type: 'Product'}) // 생산 관계 — 시작 시점과 신뢰도를 속성으로 기록 CREATE (factory)-[:MANUFACTURES { since: '2024-01-01', confidence: 0.95 }]-\u003e(product) // 재고 관계 — 별도 엣지, 수량과 갱신 시점 CREATE (factory)-[:STOCKS { quantity: 500, last_updated: '2026-02-01' }]-\u003e(product) MANUFACTURES와 STOCKS가 별개의 관계 유형이다. “A 공장에서 생산된 제품\"이라는 질문이 오면 엔진이 MANUFACTURES를 찾아서 production 테이블로 정확히 JOIN한다. RelatedTo 하나로 퉁치던 것과는 근본적으로 다르다.\n파생 지표도 그래프에 넣었다 파생 지표 정의를 Excel로 관리하면 원본 용어가 바뀔 때 파생 시트가 안 따라간다. “순매출 = 총매출 - 반품 - 에누리\"에서 총매출 정의가 바뀌었는데 순매출 쪽은 그대로—이런 불일치가 리포트까지 올라간다.\n이번에는 CALCULATED_FROM 관계로 계산식 자체를 그래프에 넣었다.\n// 순매출의 계산 구조를 관계로 표현 MATCH (net:Entity {name: '순매출'}) MATCH (gross:Entity {name: '총매출'}) MATCH (returns:Entity {name: '반품'}) MATCH (discounts:Entity {name: '에누리'}) CREATE (net)-[:CALCULATED_FROM {operator: 'subtract'}]-\u003e(gross) CREATE (net)-[:CALCULATED_FROM {operator: 'subtract'}]-\u003e(returns) CREATE (net)-[:CALCULATED_FROM {operator: 'subtract'}]-\u003e(discounts) 계산식이 바뀌면 관계를 수정한다. 변경 이력은 그래프 DB가 추적한다. Excel 시트 어딘가에 묻혀서 누가 언제 고쳤는지 모르는 것보다 낫다.\n남은 문제: 표준 호환 DataHub Glossary 모델은 DataHub만의 구조다. 업계에는 FIBO(금융), Schema.org(범용) 같은 표준 온톨로지가 있다. 산업 표준을 가져오거나 DataNexus 온톨로지를 밖으로 내보내려면 표준 포맷을 지원해야 하는데, 지금 구조로는 DataNexus 안에서만 통하는 독자 체계다.\n외부 상호운용성 없는 온톨로지는 쓰임이 제한된다.\n다음 글에서 SKOS 호환 레이어를 왜 넣었는지 다룬다.\nGoogle Colab에서 실습하기\rDataNexus를 설계하고 구축하는 과정을 기록합니다. GitHub | LinkedIn\n","wordCount":"1002","inLanguage":"en","datePublished":"2026-02-18T00:00:00Z","dateModified":"2026-02-18T00:00:00Z","author":{"@type":"Person","name":"Junho Lee"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/"},"publisher":{"@type":"Person","name":"Junho Lee | DataNexus 구축 과정","logo":{"@type":"ImageObject","url":"https://biz-agentic-ai.github.io/favicon.svg"}}}</script></head><body id=top><script data-goatcounter=https://biz-agentic-ai.goatcounter.com/count async src=//gc.zgo.at/count.js></script><aside class=sidebar id=sidebar><div class=sidebar-inner><div class=sidebar-header><a href=https://biz-agentic-ai.github.io/ class=sidebar-logo><img src=/images/DataNexus_Logo.jpg alt=DataNexus class=sidebar-logo-img>
DataNexus
</a><span class=sidebar-subtitle>구축 과정</span></div><nav class=sidebar-nav><ul><li><a href=https://biz-agentic-ai.github.io/posts/>Posts</a></li><li><a href=https://biz-agentic-ai.github.io/tags/>Tags</a></li><li><a href=https://biz-agentic-ai.github.io/categories/>Categories</a></li><li><a href=https://biz-agentic-ai.github.io/about/>About</a></li></ul></nav><div class=sidebar-section><h3 class=sidebar-section-title>DataNexus Series</h3><ul><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/004-skos-compatibility-layer/ title="4. SKOS 호환 레이어를 왜 넣었는가">4. SKOS 호환 레이어를 왜 넣었는가</a></li><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/ title="3. DataHub Glossary를 온톨로지로 쓸 수 있을까" class=active>3. DataHub Glossary를 온톨로지로 쓸 수 있을까</a></li><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/002-architecture-decisions/ title="2. 4개의 오픈소스를 이 조합으로 결정하기까지">2. 4개의 오픈소스를 이 조합으로 결정하기까지</a></li><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/ title="1. 왜 DataNexus를 만드는가">1. 왜 DataNexus를 만드는가</a></li></ul></div><div class=sidebar-stats id=sidebar-stats><div class=sidebar-stat-pill id=gc-container-pv style=display:none><span class="stat-dot stat-dot--pv"></span>
<span class=sidebar-stat-value id=gc-value-pv>-</span>
<span class=sidebar-stat-label>views</span></div><div class=sidebar-stat-pill id=gc-container-uv style=display:none><span class="stat-dot stat-dot--uv"></span>
<span class=sidebar-stat-value id=gc-value-uv>-</span>
<span class=sidebar-stat-label>visitors</span></div></div><script>(function(){var e=encodeURIComponent(location.pathname);fetch("https://biz-agentic-ai.goatcounter.com/counter/"+e+".json").then(function(e){return e.json()}).then(function(e){e.count&&(document.getElementById("gc-value-pv").textContent=e.count,document.getElementById("gc-container-pv").style.display=""),e.count_unique&&(document.getElementById("gc-value-uv").textContent=e.count_unique,document.getElementById("gc-container-uv").style.display="")}).catch(function(){})})()</script><div class=sidebar-dashboard-links id=dashboard-links><a href=https://biz-agentic-ai.goatcounter.com/ target=_blank rel=noopener><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
GoatCounter
</a><a href=https://analytics.google.com/analytics/web/ target=_blank rel=noopener><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 118 2.83"/><path d="M22 12A10 10 0 0012 2v10z"/></svg>
GA4 Dashboard</a></div><script>(function(){var e=document.getElementById("dashboard-links"),t=document.getElementById("sidebar-stats");localStorage.getItem("dn-admin")&&(e.classList.add("visible"),t.classList.add("visible")),document.querySelector(".sidebar-logo").addEventListener("dblclick",function(){var n=localStorage.getItem("dn-admin");n?(localStorage.removeItem("dn-admin"),e.classList.remove("visible"),t.classList.remove("visible")):(localStorage.setItem("dn-admin","1"),e.classList.add("visible"),t.classList.add("visible"))})})()</script><div class=sidebar-footer><button id=sidebar-theme-toggle aria-label="Toggle theme">
<svg id="sidebar-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sidebar-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
<span>Toggle Theme</span></button></div></div></aside><button class=sidebar-toggle id=sidebar-toggle aria-label="Toggle sidebar">
<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class=sidebar-overlay id=sidebar-overlay></div><div class=site-wrapper><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://biz-agentic-ai.github.io/ accesskey=h title="Junho Lee | DataNexus 구축 과정 (Alt + H)">Junho Lee | DataNexus 구축 과정</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://biz-agentic-ai.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://biz-agentic-ai.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://biz-agentic-ai.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://biz-agentic-ai.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://biz-agentic-ai.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://biz-agentic-ai.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">3. DataHub Glossary를 온톨로지로 쓸 수 있을까</h1><div class=post-meta><span title='2026-02-18 00:00:00 +0000 UTC'>February 18, 2026</span>&nbsp;·&nbsp;5 분&nbsp;·&nbsp;Junho Lee</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>목차</span></summary><div class=inner><ul><li><a href=#%ec%99%9c-glossary%eb%a5%bc-%ec%98%a8%ed%86%a8%eb%a1%9c%ec%a7%80%eb%a1%9c-%ec%93%b0%eb%a0%a4-%ed%96%88%eb%82%98 aria-label="왜 Glossary를 온톨로지로 쓰려 했나">왜 Glossary를 온톨로지로 쓰려 했나</a></li><li><a href=#glossary%ec%97%90-%ec%9a%a9%ec%96%b4%eb%a5%bc-%eb%84%a3%ea%b8%b0-%ec%8b%9c%ec%9e%91%ed%96%88%eb%8b%a4 aria-label="Glossary에 용어를 넣기 시작했다">Glossary에 용어를 넣기 시작했다</a></li><li><a href=#%ea%b4%80%ea%b3%84-4%ec%a2%85%ec%9d%98-%ed%95%9c%ea%b3%84-%ea%b3%b5%ec%9e%a5%ea%b3%bc-%ec%a0%9c%ed%92%88 aria-label="관계 4종의 한계: &ldquo;공장과 제품&rdquo;">관계 4종의 한계: &ldquo;공장과 제품&rdquo;</a><ul><li><a href=#%ed%99%95%ec%9e%a5%ed%95%98%eb%a0%a4%eb%a9%b4-%ec%9e%ac%eb%b0%b0%ed%8f%ac%ea%b0%80-%ed%95%84%ec%9a%94%ed%95%98%eb%8b%a4 aria-label="확장하려면 재배포가 필요하다">확장하려면 재배포가 필요하다</a></li></ul></li><li><a href=#%ed%8c%8c%ea%b3%a0-%eb%93%a4%ec%96%b4%ea%b0%80%eb%8b%88-%eb%8d%94-%eb%82%98%ec%99%94%eb%8b%a4 aria-label="파고 들어가니 더 나왔다">파고 들어가니 더 나왔다</a><ul><li><a href=#%eb%8f%99%ec%9d%98%ec%96%b4-%ec%b6%a9%eb%8f%8c aria-label="동의어 충돌">동의어 충돌</a></li><li><a href=#%ec%8b%9c%ea%b0%81%ed%99%94 aria-label=시각화>시각화</a></li><li><a href=#%ea%b4%80%ea%b3%84%ec%97%90-%ec%86%8d%ec%84%b1%ec%9d%84-%eb%b6%99%ec%9d%bc-%ec%88%98-%ec%97%86%eb%8b%a4 aria-label="관계에 속성을 붙일 수 없다">관계에 속성을 붙일 수 없다</a></li><li><a href=#%ec%a0%95%eb%a6%ac-%eb%90%98%eb%8a%94-%ea%b2%83%ea%b3%bc-%ec%95%88-%eb%90%98%eb%8a%94-%ea%b2%83 aria-label="정리: 되는 것과 안 되는 것">정리: 되는 것과 안 되는 것</a></li></ul></li><li><a href=#%ec%97%ad%ed%95%a0%ec%9d%84-%eb%82%98%eb%88%b4%eb%8b%a4-datahub--dozerdb aria-label="역할을 나눴다: DataHub + DozerDB">역할을 나눴다: DataHub + DozerDB</a><ul><li><a href=#dozerdb%ec%97%90%ec%84%9c%ec%9d%98-%ea%b4%80%ea%b3%84-%ec%a0%95%ec%9d%98 aria-label="DozerDB에서의 관계 정의">DozerDB에서의 관계 정의</a></li><li><a href=#%ed%8c%8c%ec%83%9d-%ec%a7%80%ed%91%9c%eb%8f%84-%ea%b7%b8%eb%9e%98%ed%94%84%ec%97%90-%eb%84%a3%ec%97%88%eb%8b%a4 aria-label="파생 지표도 그래프에 넣었다">파생 지표도 그래프에 넣었다</a></li></ul></li><li><a href=#%eb%82%a8%ec%9d%80-%eb%ac%b8%ec%a0%9c-%ed%91%9c%ec%a4%80-%ed%98%b8%ed%99%98 aria-label="남은 문제: 표준 호환">남은 문제: 표준 호환</a></li></ul></div></details></div><div class=post-content><div style="margin:1.2em 0"><a href=https://colab.research.google.com/drive/189uFJVzYT1al-5o8NWp8YD_YiT0msPd7 target=_blank rel="noopener noreferrer" style="display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,#f9ab00 0%,#f57c00 100%);color:#fff;text-decoration:none;border-radius:8px;font-weight:600;font-size:.95em;box-shadow:0 2px 8px rgba(245,124,0,.25);transition:all .2s ease"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#fff"/></svg>
Google Colab에서 실습하기</a></div><h2 id=왜-glossary를-온톨로지로-쓰려-했나>왜 Glossary를 온톨로지로 쓰려 했나<a hidden class=anchor aria-hidden=true href=#왜-glossary를-온톨로지로-쓰려-했나>#</a></h2><p>DataNexus의 핵심 아이디어는 단순하다. 비즈니스 용어 사이의 관계를 그래프로 정의해두면, NL2SQL 엔진이 그 그래프를 참조해서 자연어를 SQL로 바꿀 수 있다. 이 그래프가 온톨로지다.</p><p>온톨로지라고 하면 학술 논문에나 나올 것 같은데, 실체는 별거 없다. &ldquo;순매출은 매출의 한 종류다(IsA)&rdquo;, &ldquo;매출은 총매출, 반품, 에누리를 포함한다(HasA)&rdquo;. 사람 머릿속에 있는 업무 지식을 기계가 읽을 수 있게 옮긴 것뿐이다.</p><p>이걸 어디에 저장할지가 고민이었다. 온톨로지 전용 시스템을 하나 더 띄우면 관리 포인트가 늘어난다. 이미 DataHub를 메타데이터 플랫폼으로 쓰고 있었고, 거기 <strong>Business Glossary</strong>가 딸려 있었다. 용어 등록, 관계 설정 다 된다. <a href=/posts/datanexus/002-architecture-decisions/>이전 글</a>에서 Glossary의 관계 4종(IsA, HasA, RelatedTo, Values)이면 비즈니스 용어 계층구조를 충분히 표현할 수 있다고 봤었다.</p><p>시스템 하나를 줄일 수 있다는 게 매력적이었다. GraphQL API로 프로그래밍 접근도 되고, 용어가 변경되면 Kafka MCL(Metadata Change Log) 이벤트가 자동으로 나간다. 나쁘지 않은 출발점이었다.</p><h2 id=glossary에-용어를-넣기-시작했다>Glossary에 용어를 넣기 시작했다<a hidden class=anchor aria-hidden=true href=#glossary에-용어를-넣기-시작했다>#</a></h2><p>DataHub 세팅하고 제일 먼저 한 게 Glossary Term 등록이었다. &ldquo;순매출 IsA 매출&rdquo;, &ldquo;매출 HasA 총매출, 반품, 에누리&rdquo;. 이런 식으로 용어를 넣고 관계를 걸었다.</p><p>기본 계층구조는 깔끔하게 들어갔다. 매출 → 총매출, 순매출 → 실매출.</p><p>문제는 그 다음이었다.</p><h2 id=관계-4종의-한계-공장과-제품>관계 4종의 한계: &ldquo;공장과 제품&rdquo;<a hidden class=anchor aria-hidden=true href=#관계-4종의-한계-공장과-제품>#</a></h2><p>실제 업무 데이터를 모델링하면서 벽에 부딪혔다.</p><p>&ldquo;A 공장에서 <strong>생산된</strong> B 제품"과 &ldquo;A 공장에 <strong>재고가 있는</strong> B 제품&rdquo;. 둘 다 공장과 제품 사이의 관계인데, 하나는 생산(Manufactures), 하나는 재고(Stocks)다. 의미가 완전히 다르다.</p><p>DataHub Glossary에서 이걸 표현하면? 둘 다 <code>RelatedTo</code>가 된다. &ldquo;공장 RelatedTo 제품"이 두 개 생기는데, 어느 게 생산이고 어느 게 재고인지 구분할 방법이 없다.</p><p>이게 왜 치명적이냐면—DataNexus의 NL2SQL 엔진이 온톨로지를 보고 SQL을 만들기 때문이다. &ldquo;A 공장에서 생산된 제품 목록 보여줘"라는 질문이 들어오면, 엔진은 공장-제품 관계를 찾아서 해당 테이블과 JOIN 경로를 결정한다.</p><blockquote><p><strong>사용자 질문</strong>: <span style=color:#3498db>&ldquo;A 공장에서 생산된 제품은?"</span></p><p><strong>온톨로지 조회</strong>: 공장 → <span style=color:#e67e22><strong>RelatedTo</strong></span> → 제품 (생산? 재고? 알 수 없음)</p><p>→ LLM이 production 테이블 대신 inventory 테이블을 JOIN할 수 있음
→ <span style=color:#e74c3c><strong>잘못된 결과 반환</strong></span></p></blockquote><p>관계 유형이 <code>RelatedTo</code> 하나뿐이니 엔진한테는 판단 근거가 없다. 잘못된 JOIN을 타면 사용자에게 엉뚱한 데이터가 나간다.</p><h3 id=확장하려면-재배포가-필요하다>확장하려면 재배포가 필요하다<a hidden class=anchor aria-hidden=true href=#확장하려면-재배포가-필요하다>#</a></h3><p>DataHub에서 관계를 세분화하면 되지 않느냐. 안 된다.</p><p>PDL(Persona Data Language)로 새 Aspect를 정의하고, <code>@Relationship</code> 어노테이션으로 관계 유형을 선언하고, DataHub를 빌드해서 재배포해야 한다. 관계 유형 하나 추가할 때마다 이 사이클을 돌려야 한다.</p><p>비즈니스 모델링을 하다 보면 관계는 계속 늘어난다. &ldquo;공급(Supplies)&rdquo;, &ldquo;검수(Inspects)&rdquo;, &ldquo;반품(Returns)&rdquo;&mldr; 업무 맥락에 따라 수십 가지가 필요해지는데, 하나마다 코드 고치고 재배포하는 건 현실적이지 않다.</p><h2 id=파고-들어가니-더-나왔다>파고 들어가니 더 나왔다<a hidden class=anchor aria-hidden=true href=#파고-들어가니-더-나왔다>#</a></h2><p>관계 유형만 문제가 아니었다.</p><h3 id=동의어-충돌>동의어 충돌<a hidden class=anchor aria-hidden=true href=#동의어-충돌>#</a></h3><p>&ldquo;순매출"과 &ldquo;실매출"을 동의어로 등록했다. 같은 개념인데 이름만 다른 경우다. 그런데 두 용어 모두 &ldquo;Net Sales"라는 영문 동의어를 갖고 있었다. 하나의 영문명에 한글 용어 두 개가 매핑된 상황—DataHub는 이걸 그냥 넘긴다. 경고도 없다.</p><p>NL2SQL에서 동의어 매핑이 꼬이면 엔진이 엉뚱한 용어를 참조한다. 용어가 수백 개를 넘어가면 이런 충돌을 사람 눈으로 잡을 수 없다. 커스텀 검증 로직을 따로 짜야 한다는 뜻이다.</p><h3 id=시각화>시각화<a hidden class=anchor aria-hidden=true href=#시각화>#</a></h3><p>DataHub UI는 데이터 계보(Lineage) 탐색에 맞춰져 있다. 테이블 A → 테이블 B로 데이터가 흐르는 방향성 있는 트리.</p><p>온톨로지는 구조가 다르다. 노드 수십~수백 개가 다대다로 엮인 그물망이다. &ldquo;제품"이 &ldquo;공장&rdquo;, &ldquo;창고&rdquo;, &ldquo;거래처&rdquo;, &ldquo;카테고리"와 전부 다른 관계로 연결되어 있고, 그 노드들끼리 또 서로 물려 있다. DataHub에는 이런 그래프를 탐색할 화면 자체가 없다.</p><p>만들어 놓고 전체 그림을 못 보면 관리가 안 된다.</p><h3 id=관계에-속성을-붙일-수-없다>관계에 속성을 붙일 수 없다<a hidden class=anchor aria-hidden=true href=#관계에-속성을-붙일-수-없다>#</a></h3><p>이게 제일 문제였다.</p><p>DataHub Glossary에서 &ldquo;A RelatedTo B"를 설정하면 그 관계에 아무것도 더 달 수 없다. 실무에서는 관계 자체에 정보가 필요한 경우가 많다.</p><p><strong>신뢰도(confidence)</strong> 가 대표적이다. 자동 추출된 관계는 0.7, 전문가가 직접 정의한 관계는 0.95—이 차이를 NL2SQL 엔진이 알아야 한다. <strong>유효 기간(temporal)</strong> 도 마찬가지다. 조직 개편으로 부서-제품 매핑이 바뀌면, &ldquo;이 관계가 언제부터 언제까지 유효한지"를 추적해야 한다. <strong>카디널리티(cardinality)</strong> 는 JOIN 전략에 직접 영향을 준다.</p><p>조직 개편으로 부서-제품 매핑이 바뀌면, 과거 시점 조직 구조로 현재 데이터를 조회하게 된다. 리포트 수치가 안 맞는 전형적인 원인이다. 관계에 시간축이 없으면 이걸 막을 방법이 없다.</p><h3 id=정리-되는-것과-안-되는-것>정리: 되는 것과 안 되는 것<a hidden class=anchor aria-hidden=true href=#정리-되는-것과-안-되는-것>#</a></h3><table><thead><tr><th>되는 것</th><th>안 되는 것</th></tr></thead><tbody><tr><td>용어 정의 (name, definition)</td><td>세분화된 관계 유형 (MANUFACTURES, STOCKS 등)</td></tr><tr><td>동의어 등록 (커스텀 필드)</td><td>동의어 중복/충돌 자동 감지</td></tr><tr><td>4종 관계 (IsA, HasA, RelatedTo, Values)</td><td>관계에 속성 부여 (신뢰도, 유효 기간)</td></tr><tr><td>GraphQL API로 프로그래밍 접근</td><td>복잡한 그래프 탐색 UI</td></tr><tr><td>Kafka MCL 이벤트 스트림</td><td>재배포 없는 실시간 관계 유형 확장</td></tr></tbody></table><p>DataHub Glossary는 용어 사전으로서는 쓸 만하다. 온톨로지 저장소로는 표현력이 모자랐다.</p><h2 id=역할을-나눴다-datahub--dozerdb>역할을 나눴다: DataHub + DozerDB<a hidden class=anchor aria-hidden=true href=#역할을-나눴다-datahub--dozerdb>#</a></h2><p>Glossary를 통째로 버리는 건 답이 아니었다. 용어 정의의 원천(Source of Truth)으로 DataHub를 대체할 게 없다. GraphQL API, Kafka MCL 이벤트—이 인프라를 다른 도구에서 바닥부터 만드는 건 시간 낭비다.</p><p>각자 잘하는 걸 맡겼다.</p><ul><li><strong>DataHub Glossary</strong> → 용어 정의와 기본 관계의 원천 (Source of Truth)</li><li><strong>DozerDB</strong> → 세분화된 관계, 속성 달린 엣지, 그래프 추론 담당</li></ul><p>DozerDB를 고른 건 Cypher 쿼리를 쓸 수 있어서다. 관계(엣지)에 속성을 자유롭게 붙일 수 있고, 관계 유형을 추가할 때 스키마 변경이나 재배포가 필요 없다.</p><p><img alt="DataHub + DozerDB 역할 분리" loading=lazy src=/images/datanexus/datahub-dozerdb-sync.png></p><p>동기화 흐름은 단순하다. DataHub에서 Glossary Term이 바뀌면 Kafka MCL 이벤트가 나간다. 이벤트를 구독하는 Consumer가 DozerDB 온톨로지 그래프에 반영한다. 이름이나 정의 같은 기본 정보는 DataHub가 쥐고 있고, DozerDB는 그 위에 세분화된 관계와 속성을 얹는다.</p><h3 id=dozerdb에서의-관계-정의>DozerDB에서의 관계 정의<a hidden class=anchor aria-hidden=true href=#dozerdb에서의-관계-정의>#</a></h3><p>아까 문제됐던 &ldquo;공장-제품&rdquo; 관계가 DozerDB에서는 이렇게 풀린다.</p><div class=highlight><pre tabindex=0 style=color:#c0caf5;background-color:#1a1b26;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#9ece6a;font-weight:700>//</span> <span style=color:#db4b4b>엔티티</span> <span style=color:#db4b4b>생성</span> (DataHub에서 <span style=color:#db4b4b>동기화된</span> <span style=color:#db4b4b>용어</span>)
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (factory:Entity <span style=color:#db4b4b>{</span>name: <span style=color:#9ece6a>&#39;A공장&#39;</span>, <span style=color:#bb9af7>type</span>: <span style=color:#9ece6a>&#39;Factory&#39;</span><span style=color:#db4b4b>}</span>)
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (product:Entity <span style=color:#db4b4b>{</span>name: <span style=color:#9ece6a>&#39;B제품&#39;</span>, <span style=color:#bb9af7>type</span>: <span style=color:#9ece6a>&#39;Product&#39;</span><span style=color:#db4b4b>}</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9ece6a;font-weight:700>//</span> <span style=color:#db4b4b>생산</span> <span style=color:#db4b4b>관계</span> <span style=color:#db4b4b>—</span> <span style=color:#db4b4b>시작</span> <span style=color:#db4b4b>시점과</span> <span style=color:#db4b4b>신뢰도를</span> <span style=color:#db4b4b>속성으로</span> <span style=color:#db4b4b>기록</span>
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (factory)<span style=color:#9ece6a;font-weight:700>-</span>[:MANUFACTURES <span style=color:#db4b4b>{</span>
</span></span><span style=display:flex><span>  since: <span style=color:#9ece6a>&#39;2024-01-01&#39;</span>,
</span></span><span style=display:flex><span>  confidence: <span style=color:#e0af68>0</span>.<span style=color:#e0af68>95</span>
</span></span><span style=display:flex><span><span style=color:#db4b4b>}</span>]<span style=color:#9ece6a;font-weight:700>-&gt;</span>(product)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9ece6a;font-weight:700>//</span> <span style=color:#db4b4b>재고</span> <span style=color:#db4b4b>관계</span> <span style=color:#db4b4b>—</span> <span style=color:#db4b4b>별도</span> <span style=color:#db4b4b>엣지</span>, <span style=color:#db4b4b>수량과</span> <span style=color:#db4b4b>갱신</span> <span style=color:#db4b4b>시점</span>
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (factory)<span style=color:#9ece6a;font-weight:700>-</span>[:STOCKS <span style=color:#db4b4b>{</span>
</span></span><span style=display:flex><span>  quantity: <span style=color:#e0af68>500</span>,
</span></span><span style=display:flex><span>  last_updated: <span style=color:#9ece6a>&#39;2026-02-01&#39;</span>
</span></span><span style=display:flex><span><span style=color:#db4b4b>}</span>]<span style=color:#9ece6a;font-weight:700>-&gt;</span>(product)
</span></span></code></pre></div><p><code>MANUFACTURES</code>와 <code>STOCKS</code>가 별개의 관계 유형이다. &ldquo;A 공장에서 생산된 제품"이라는 질문이 오면 엔진이 <code>MANUFACTURES</code>를 찾아서 production 테이블로 정확히 JOIN한다. <code>RelatedTo</code> 하나로 퉁치던 것과는 근본적으로 다르다.</p><h3 id=파생-지표도-그래프에-넣었다>파생 지표도 그래프에 넣었다<a hidden class=anchor aria-hidden=true href=#파생-지표도-그래프에-넣었다>#</a></h3><p>파생 지표 정의를 Excel로 관리하면 원본 용어가 바뀔 때 파생 시트가 안 따라간다. &ldquo;순매출 = 총매출 - 반품 - 에누리"에서 총매출 정의가 바뀌었는데 순매출 쪽은 그대로—이런 불일치가 리포트까지 올라간다.</p><p>이번에는 <code>CALCULATED_FROM</code> 관계로 계산식 자체를 그래프에 넣었다.</p><div class=highlight><pre tabindex=0 style=color:#c0caf5;background-color:#1a1b26;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#9ece6a;font-weight:700>//</span> <span style=color:#db4b4b>순매출의</span> <span style=color:#db4b4b>계산</span> <span style=color:#db4b4b>구조를</span> <span style=color:#db4b4b>관계로</span> <span style=color:#db4b4b>표현</span>
</span></span><span style=display:flex><span><span style=color:#bb9af7>MATCH</span> (net:Entity <span style=color:#db4b4b>{</span>name: <span style=color:#9ece6a>&#39;순매출&#39;</span><span style=color:#db4b4b>}</span>)
</span></span><span style=display:flex><span><span style=color:#bb9af7>MATCH</span> (gross:Entity <span style=color:#db4b4b>{</span>name: <span style=color:#9ece6a>&#39;총매출&#39;</span><span style=color:#db4b4b>}</span>)
</span></span><span style=display:flex><span><span style=color:#bb9af7>MATCH</span> (<span style=color:#bb9af7>returns</span>:Entity <span style=color:#db4b4b>{</span>name: <span style=color:#9ece6a>&#39;반품&#39;</span><span style=color:#db4b4b>}</span>)
</span></span><span style=display:flex><span><span style=color:#bb9af7>MATCH</span> (discounts:Entity <span style=color:#db4b4b>{</span>name: <span style=color:#9ece6a>&#39;에누리&#39;</span><span style=color:#db4b4b>}</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (net)<span style=color:#9ece6a;font-weight:700>-</span>[:CALCULATED_FROM <span style=color:#db4b4b>{</span><span style=color:#bb9af7>operator</span>: <span style=color:#9ece6a>&#39;subtract&#39;</span><span style=color:#db4b4b>}</span>]<span style=color:#9ece6a;font-weight:700>-&gt;</span>(gross)
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (net)<span style=color:#9ece6a;font-weight:700>-</span>[:CALCULATED_FROM <span style=color:#db4b4b>{</span><span style=color:#bb9af7>operator</span>: <span style=color:#9ece6a>&#39;subtract&#39;</span><span style=color:#db4b4b>}</span>]<span style=color:#9ece6a;font-weight:700>-&gt;</span>(<span style=color:#bb9af7>returns</span>)
</span></span><span style=display:flex><span><span style=color:#bb9af7>CREATE</span> (net)<span style=color:#9ece6a;font-weight:700>-</span>[:CALCULATED_FROM <span style=color:#db4b4b>{</span><span style=color:#bb9af7>operator</span>: <span style=color:#9ece6a>&#39;subtract&#39;</span><span style=color:#db4b4b>}</span>]<span style=color:#9ece6a;font-weight:700>-&gt;</span>(discounts)
</span></span></code></pre></div><p>계산식이 바뀌면 관계를 수정한다. 변경 이력은 그래프 DB가 추적한다. Excel 시트 어딘가에 묻혀서 누가 언제 고쳤는지 모르는 것보다 낫다.</p><h2 id=남은-문제-표준-호환>남은 문제: 표준 호환<a hidden class=anchor aria-hidden=true href=#남은-문제-표준-호환>#</a></h2><p>DataHub Glossary 모델은 DataHub만의 구조다. 업계에는 FIBO(금융), Schema.org(범용) 같은 표준 온톨로지가 있다. 산업 표준을 가져오거나 DataNexus 온톨로지를 밖으로 내보내려면 표준 포맷을 지원해야 하는데, 지금 구조로는 DataNexus 안에서만 통하는 독자 체계다.</p><p>외부 상호운용성 없는 온톨로지는 쓰임이 제한된다.</p><p><a href=/posts/datanexus/004-skos-compatibility-layer/>다음 글에서 SKOS 호환 레이어를 왜 넣었는지 다룬다.</a></p><div style="margin:1.2em 0"><a href=https://colab.research.google.com/drive/189uFJVzYT1al-5o8NWp8YD_YiT0msPd7 target=_blank rel="noopener noreferrer" style="display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,#f9ab00 0%,#f57c00 100%);color:#fff;text-decoration:none;border-radius:8px;font-weight:600;font-size:.95em;box-shadow:0 2px 8px rgba(245,124,0,.25);transition:all .2s ease"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#fff"/></svg>
Google Colab에서 실습하기</a></div><hr><p><em>DataNexus를 설계하고 구축하는 과정을 기록합니다. <a href=https://github.com/biz-agentic-ai>GitHub</a> | <a href=https://www.linkedin.com/in/leejuno/>LinkedIn</a></em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://biz-agentic-ai.github.io/tags/datanexus/>Datanexus</a></li><li><a href=https://biz-agentic-ai.github.io/tags/datahub/>Datahub</a></li><li><a href=https://biz-agentic-ai.github.io/tags/dozerdb/>Dozerdb</a></li><li><a href=https://biz-agentic-ai.github.io/tags/til/>Til</a></li></ul><nav class=paginav><a class=prev href=https://biz-agentic-ai.github.io/posts/datanexus/002-architecture-decisions/><span class=title>« 이전 페이지</span><br><span>2. 4개의 오픈소스를 이 조합으로 결정하기까지</span>
</a><a class=next href=https://biz-agentic-ai.github.io/posts/datanexus/004-skos-compatibility-layer/><span class=title>다음 페이지 »</span><br><span>4. SKOS 호환 레이어를 왜 넣었는가</span></a></nav></footer><div class=comments><script src=https://giscus.app/client.js data-repo=biz-agentic-ai/biz-agentic-ai.github.io data-repo-id=R_kgDOPhm8OQ data-category=General data-category-id=DIC_kwDOPhm8Oc4C2uES data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=ko data-loading=lazy crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2026 <a href=https://biz-agentic-ai.github.io/>Junho Lee | DataNexus 구축 과정</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="복사";function s(){t.innerHTML="복사 완료!",setTimeout(()=>{t.innerHTML="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></div><script>(function(){const n=document.getElementById("sidebar-toggle"),e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");n&&e&&(n.addEventListener("click",function(){e.classList.toggle("open"),t.classList.toggle("open")}),t.addEventListener("click",function(){e.classList.remove("open"),t.classList.remove("open")}));const s=document.getElementById("sidebar-theme-toggle");s&&s.addEventListener("click",function(){document.body.classList.toggle("dark"),localStorage.setItem("pref-theme",document.body.classList.contains("dark")?"dark":"light")})})()</script></body></html>