<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>1. 왜 DataNexus를 만드는가 | Junho Lee | DataNexus 구축 과정</title>
<meta name=keywords content="datanexus,ontology,nl2sql,graphrag"><meta name=description content="엔터프라이즈 데이터 분석의 구조적 문제를 풀기 위해 온톨로지 기반 데이터 에이전트를 설계하기 시작한 이유."><meta name=author content="Junho Lee"><link rel=canonical href=https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/><link crossorigin=anonymous href=/assets/css/stylesheet.b591c240a5f958d69446e482ce33af717020166b99b3d3c647e1a530cf8cc8f6.css integrity="sha256-tZHCQKX5WNaURuSCzjOvcXAgFmuZs9PGR+GlMM+MyPY=" rel="preload stylesheet" as=style><link rel=icon href=https://biz-agentic-ai.github.io/favicon.svg><link rel=icon type=image/svg+xml sizes=16x16 href=https://biz-agentic-ai.github.io/favicon.svg><link rel=icon type=image/svg+xml sizes=32x32 href=https://biz-agentic-ai.github.io/favicon.svg><link rel=apple-touch-icon href=https://biz-agentic-ai.github.io/favicon.svg><link rel=mask-icon href=https://biz-agentic-ai.github.io/favicon.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@biz_agentic_ai"><meta name=twitter:creator content="@biz_agentic_ai"><meta name=googlebot content="index, follow"><meta name=bingbot content="index, follow"><meta name=slurp content="index, follow"><meta name=language content="ko"><meta name=geo.region content="KR"><meta name=geo.placename content="Seoul"><meta property="og:type" content="article"><meta property="og:site_name" content="Junho Lee | DataNexus 구축 과정"><meta property="og:locale" content="ko_KR"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"1. 왜 DataNexus를 만드는가","description":"엔터프라이즈 데이터 분석의 구조적 문제를 풀기 위해 온톨로지 기반 데이터 에이전트를 설계하기 시작한 이유.","image":"","author":{"@type":"Person","name":"Junho Lee"},"publisher":{"@type":"Organization","name":"Junho Lee | DataNexus 구축 과정","logo":{"@type":"ImageObject","url":"https:\/\/biz-agentic-ai.github.io\/favicon.svg"}},"datePublished":"2026-02-16T00:00:00Z","dateModified":"2026-02-16T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/biz-agentic-ai.github.io\/posts\/datanexus\/001-why-datanexus\/"}}</script><style>:root{--sidebar-width:260px;--sidebar-bg:#1a1a2e;--sidebar-text:#e0e0e0;--sidebar-accent:#667eea;--sidebar-hover:rgba(102, 126, 234, 0.15);--sidebar-active-bg:linear-gradient(135deg, #667eea 0%, #764ba2 100%)}html{font-size:15px}.first-entry{min-height:240px}.first-entry .entry-header h1{font-size:24px}.first-entry .entry-content{font-size:14px}.home-info .entry-content{font-size:14px}.entry-header h2{font-size:20px}.entry-content{font-size:13px}.post-title,.post-single .post-title{font-size:26px}.post-content{font-size:15px;line-height:1.75}.post-content h1{font-size:24px}.post-content h2{font-size:21px}.post-content h3{font-size:18px}.post-content h4{font-size:16px}.post-meta{font-size:13px}.toc a{font-size:13px}.header{display:none}.site-wrapper{--header-height:0px}.main{padding-top:8px}.first-entry{margin-top:0}.sidebar{position:fixed;top:0;left:0;width:var(--sidebar-width);height:100vh;background:var(--sidebar-bg);color:var(--sidebar-text);z-index:100;overflow-y:auto;transition:transform .3s ease}.sidebar-inner{display:flex;flex-direction:column;height:100%;padding:24px 0}.sidebar-header{padding:0 20px 20px;border-bottom:1px solid rgba(255,255,255,8%);margin-bottom:8px}.sidebar-logo{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:700;color:#fff;text-decoration:none;letter-spacing:-.02em}.sidebar-logo-img{width:28px;height:28px;border-radius:6px;object-fit:cover}.home-logo-img{width:42px;height:42px;border-radius:8px;object-fit:cover;vertical-align:middle;margin-right:8px}.sidebar-logo:hover{opacity:.85}.sidebar-subtitle{display:block;font-size:.75rem;color:rgba(255,255,255,.4);margin-top:2px;letter-spacing:.02em}.sidebar-nav ul,.sidebar-section ul{list-style:none;padding:0;margin:0}.sidebar-nav{padding:8px 0}.sidebar-nav li a,.sidebar-section li a{display:block;padding:9px 20px;color:var(--sidebar-text);text-decoration:none;font-size:.88rem;border-left:3px solid transparent;transition:all .2s}.sidebar-nav li a:hover,.sidebar-section li a:hover{background:var(--sidebar-hover);border-left-color:var(--sidebar-accent);color:#fff}.sidebar-nav li a.active{background:var(--sidebar-active-bg);color:#fff;border-left-color:transparent;font-weight:600;border-radius:0 20px 20px 0;margin-right:12px}.sidebar-section li a.active{color:var(--sidebar-accent);font-weight:600;border-left-color:var(--sidebar-accent)}.sidebar-section{padding:8px 0;border-top:1px solid rgba(255,255,255,8%);margin-top:4px}.sidebar-section-title{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:rgba(255,255,255,.4);padding:8px 20px;margin:0;font-weight:600}.sidebar-section li a{font-size:.82rem;padding:7px 20px;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-footer{margin-top:auto;padding:16px 20px;border-top:1px solid rgba(255,255,255,8%)}.sidebar-footer button{display:inline-flex;align-items:center;gap:8px;background:0 0;border:1px solid rgba(255,255,255,.15);color:var(--sidebar-text);padding:6px 14px;border-radius:8px;cursor:pointer;font-size:.78rem;transition:all .2s;width:100%;justify-content:center}.sidebar-footer button:hover{background:rgba(255,255,255,8%);border-color:var(--sidebar-accent)}body.dark .sidebar-footer #sidebar-sun{display:inline-block}body.dark .sidebar-footer #sidebar-moon{display:none}body:not(.dark) .sidebar-footer #sidebar-sun{display:none}body:not(.dark) .sidebar-footer #sidebar-moon{display:inline-block}.sidebar-stats{padding:10px 20px;border-top:1px solid rgba(255,255,255,8%);margin-top:4px;display:flex;flex-direction:column;gap:6px}.sidebar-stat-pill{display:flex;align-items:center;gap:8px;padding:0 2px;height:28px}.stat-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}.stat-dot--pv{background:#667eea}.stat-dot--uv{background:#f5576c}.sidebar-stat-value{font-weight:600;font-size:.85rem;color:rgba(255,255,255,.9);font-variant-numeric:tabular-nums}.sidebar-stat-label{font-size:.7rem;color:rgba(255,255,255,.3)}.sidebar-dashboard-links{padding:8px 20px;display:none;flex-direction:column;gap:5px}.sidebar-dashboard-links.visible{display:flex}.sidebar-dashboard-links a{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;font-size:.7rem;white-space:nowrap;color:rgba(255,255,255,.5);text-decoration:none;border:1px solid rgba(255,255,255,.1);border-radius:6px;transition:all .2s}.sidebar-dashboard-links a:hover{color:#fff;background:var(--sidebar-hover);border-color:var(--sidebar-accent)}.site-wrapper{margin-left:var(--sidebar-width);min-height:100vh}.sidebar-toggle{display:none;position:fixed;bottom:20px;left:20px;z-index:101;background:var(--sidebar-active-bg);color:#fff;border:none;border-radius:50%;width:48px;height:48px;cursor:pointer;box-shadow:0 4px 14px rgba(102,126,234,.4);align-items:center;justify-content:center;transition:transform .2s}.sidebar-toggle:hover{transform:scale(1.08)}.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:99;backdrop-filter:blur(2px)}@media(max-width:860px){.sidebar{transform:translateX(-100%)}.sidebar.open{transform:translateX(0)}.sidebar-toggle{display:flex}.sidebar-overlay.open{display:block}.site-wrapper{margin-left:0}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0RS9ZG67P"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Q0RS9ZG67P")}</script><meta property="og:url" content="https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/"><meta property="og:site_name" content="Junho Lee | DataNexus 구축 과정"><meta property="og:title" content="1. 왜 DataNexus를 만드는가"><meta property="og:description" content="엔터프라이즈 데이터 분석의 구조적 문제를 풀기 위해 온톨로지 기반 데이터 에이전트를 설계하기 시작한 이유."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-16T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-16T00:00:00+00:00"><meta property="article:tag" content="Datanexus"><meta property="article:tag" content="Ontology"><meta property="article:tag" content="Nl2sql"><meta property="article:tag" content="Graphrag"><meta property="og:see_also" content="https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/"><meta property="og:see_also" content="https://biz-agentic-ai.github.io/posts/datanexus/002-architecture-decisions/"><meta name=twitter:card content="summary"><meta name=twitter:title content="1. 왜 DataNexus를 만드는가"><meta name=twitter:description content="엔터프라이즈 데이터 분석의 구조적 문제를 풀기 위해 온톨로지 기반 데이터 에이전트를 설계하기 시작한 이유."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://biz-agentic-ai.github.io/posts/"},{"@type":"ListItem","position":2,"name":"1. 왜 DataNexus를 만드는가","item":"https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"1. 왜 DataNexus를 만드는가","name":"1. 왜 DataNexus를 만드는가","description":"엔터프라이즈 데이터 분석의 구조적 문제를 풀기 위해 온톨로지 기반 데이터 에이전트를 설계하기 시작한 이유.","keywords":["datanexus","ontology","nl2sql","graphrag"],"articleBody":"“VIP 기준이 뭐죠?” 작년에 유통사 BI Agent 프로젝트를 하면서 있었던 일이다. 자연어 질의/응답 시스템을 만들고 있었다.\n현업 담당자가 테스트 중에 물었다. “지난달 VIP 고객 매출 알려줘.” 시스템이 숫자를 뱉어냈다. 담당자 표정이 좋지 않았다. “이거 뭔가 이상한데요. VIP 기준이 우리 팀이랑 다른 것 같아요.”\n확인해 보니 마케팅의 VIP와 CRM의 VIP가 달랐다. 매출도 문제였다. 순매출이냐 총매출이냐에 따라 수억 단위로 차이가 난다.\n이 장면은 이 프로젝트에서만 본 게 아니다.\n60TB급 대기업 DW를 클라우드로 마이그레이션할 때도, 54억짜리 차세대 정보계를 다수 벤더와 1년 넘게 만들 때도 본질은 같았다. 차세대 정보계에서는 각 벤더가 정의하는 “매출\"과 “원가\"의 기준이 달라서, 데이터 정합성 맞추는 데만 몇 달을 날렸다. 수백 명이 투입된 프로젝트에서 용어 정의 불일치가 만드는 비용은 생각보다 크다.\n20년 가까이 데이터 조직에서 일하면서 이 문제를 반복적으로 봤다. 테이블과 컬럼은 있다. 없는 건 맥락이다. “이 컬럼이 비즈니스에서 뭘 의미하는지\"가 기계가 읽을 수 있는 형태로 어디에도 정의되어 있지 않다.\nDataNexus는 여기서 출발했다.\nNL2SQL은 만능이 아니다 요즘 NL2SQL 도구가 많다. 자연어를 SQL로 바꿔주는 것 자체는 이미 된다.\n문제는 실환경이다. 유통사 프로젝트에서 직접 겪었는데, 학술 벤치마크에서 좋은 점수를 받는 모델이 실제 DW에 연결하면 체감 정확도가 확 떨어졌다. 카드사·통신사·공공데이터까지 내외부 데이터를 통합해 놓은 환경이었다. LLM이 이 복잡도를 감당하지 못했다.\n원인은 이전 프로젝트에서 이미 알고 있었다. 대기업 DW의 DDL을 열어보면 T_CUST_MST.CUST_GRD_CD, T_ORD_DTL.SALE_AMT 같은 약어 테이블이 수천 개다. 벤치마크 DB의 customer_name, order_date와는 차원이 다르다. 같은 회사인데 사업부마다 테이블 네이밍 규칙이 다르고, “매출\"이라는 단어 하나가 사업부마다 다른 테이블을 가리킨다.\n파생 지표는 더 골치다. “순매출\"은 단일 컬럼이 아니다. SUM(SALE_AMT) - SUM(RTN_AMT) - SUM(DC_AMT) 같은 계산식인데, 이 공식은 어떤 DDL에도 안 적혀 있다. 현업 머릿속에 있거나, 잘해야 누군가의 Excel 정의서 어딘가에 묻혀 있다.\nNL2SQL의 병목은 SQL 생성 능력이 아니다. 맥락의 부재다.\n온톨로지라는 선택 대화형 BI 솔루션을 직접 만들면서 프롬프트 엔지니어링을 아무리 최적화해도 DDL만으로는 한계가 뚜렷했다. 멀티에이전트 아키텍처를 설계해 보기도 했다. 근본 문제는 LLM에게 줄 맥락 자체가 없다는 것이었다.\n온톨로지를 붙이기로 했다.\n거창한 학술 개념이 아니다. 실용적으로 보면 이런 것이다:\n# 순매출 용어 정의 - term: 순매출 definition: 총매출에서 반품과 에누리를 차감한 금액 formula: SUM(SALE_AMT) - SUM(RTN_AMT) - SUM(DC_AMT) synonyms: [Net Sales, 순매출액, 넷세일즈] related_tables: [T_SALE_DTL, T_RTN_DTL] owner: 재무팀 이런 용어 정의를 메타데이터 카탈로그에 등록하고, NL2SQL 엔진의 RAG Store에 자동 동기화한다. LLM이 “순매출\"이라는 단어를 봤을 때 어떤 테이블의 어떤 컬럼을 어떤 계산식으로 조합해야 하는지 알게 되는 구조다.\n처리 흐름은 이렇다:\n온톨로지 적용 전후 차이 — 내부 목표치가 EX(Execution Accuracy) 기준 +15~20%p 향상이다. MVP에서 EX 80% 이상, 안정화 단계에서 90% 이상. 이 수치가 현실적인지는 만들어 보면서 검증한다.\n“ChatGPT에 DDL 붙여넣으면 되지 않나?” 자주 받는 질문이다. 안 된다.\n대기업 DW의 DDL을 다 붙여넣으면 수십만 토큰이다. 내가 겪었던 프로젝트만 해도 테이블이 수천 개였다. 컨텍스트 윈도우에 다 못 넣는다. 넣더라도 LLM이 그 안에서 정확한 테이블을 골라내는 건 Needle-in-a-Haystack 문제다.\n보안 이슈도 있다. 기업 내부 스키마를 외부 API에 보낼 수 없다. Row-level Security도 걸린다. 같은 “매출\"이라도 A그룹사 사용자와 B그룹사 사용자가 봐야 하는 범위가 다르다.\n지속성이 가장 큰 문제다. DDL은 바뀐다. 비즈니스 용어 정의도 바뀐다. 차세대 정보계 프로젝트에서 EIS 오픈 후에도 단계별 릴리즈를 계속했는데, 매번 메타데이터가 변경됐다. 일회성 프롬프트가 아니라 변경을 감지해서 자동으로 RAG Store를 갱신하는 파이프라인이 필요하다.\n별도의 플랫폼이 필요하다는 결론이었다.\nDataNexus가 하려는 것 네 가지 컴포넌트로 구성된다.\n메타데이터 카탈로그 — 비즈니스 용어 정의, 테이블 메타, 데이터 계보를 한 곳에서 관리한다. 온톨로지의 원천(Source of Truth). NL2SQL 엔진 — 자연어를 SQL로 변환하되, 온톨로지에서 가져온 맥락을 프롬프트에 주입해서 정확도를 높인다. 문서 지식엔진 — 사업보고서, 정책문서 같은 비정형 데이터를 GraphRAG + 벡터 하이브리드로 검색한다. 그래프 DB — 온톨로지를 지식 그래프로 저장하고, 그룹사별 Multi-DB로 데이터를 격리한다. 한 줄로 요약하면: 카탈로그에서 정의한 온톨로지가 NL2SQL과 문서검색에 자동 동기화되어, 사용자의 자연어 질문에 맥락을 입혀준다. 각 컴포넌트에 사용한 구체적인 오픈소스와 선정 이유는 다음 글에서 다룬다.\n왜 지금인가 기술적 동기만으로 이 프로젝트를 시작한 건 아니다.\n이전 직장에서 12년간 DW/BI 컨설팅을 했다. 팀을 2명에서 20명으로 키우고, 고객사 C레벨 대상 발표를 수십 회 하면서 “왜 메타데이터가 중요한지” 설명하는 데 커리어의 상당 부분을 썼다. 10년 넘게 느낀 건 — 이 문제가 사람의 설득만으로는 안 풀린다는 거였다. 시스템이 필요하다.\nLLM이 나오면서 문제의 프레임이 바뀌었다.\n범용 모델이 빠르게 좋아지고 있다. 단순 기획이나 문서 생성은 곧 commodity가 된다. 20년간 쌓아온 “기업 데이터의 맥락을 이해하는 능력\"이 가치를 유지하려면, 그 맥락을 구조화해서 기계에 주입하는 시스템이 있어야 한다.\nDataNexus가 노리는 영역은 Non-verifiable Domain + Proprietary Data다. LLM 연구에서 Non-verifiable Domain이란 수학이나 코딩처럼 정답을 자동 검증할 수 있는 영역(Verifiable)의 반대편이다. 품질 평가가 주관적이고 외부에서 즉시 판별하기 어려운 영역. 기업 내부의 암묵적 지식, 역할별 해석 차이, 비공개 운영 데이터가 여기에 해당한다. 이런 데이터 위에 쌓는 경쟁 우위를 AI 전략에서는 Data Moat라고 부른다.\n이 우위가 영구적이라고는 생각하지 않는다. 범용 모델의 일반화 속도를 DataNexus의 데이터 축적 속도가 앞서야 한다. 시간이 중요하다. 올해 상반기까지 MVP를 내고 데이터 축적 루프를 돌리는 게 목표다.\n방어선 요소 구현 방향 축적 방식 온톨로지 기반 맥락 메타데이터 카탈로그 + SKOS 호환 도메인 전문가의 용어 정제 역할별 해석 차이 페르소나별 응답 최적화 사용 패턴 기반 개인화 시간축 지식 그래프 Temporal Knowledge Graph Episode 기반 실시간 축적 비공개 운영 데이터 그래프 DB 격리 + Row-level Security 그룹사별 독립 자산화 이 블로그의 목적 DataNexus를 만들면서 부딪히는 의사결정, 삽질, 해결 과정을 기록한다.\n다룰 것들:\n기술 스택을 선정한 과정 (후보군 탈락 사유 포함) 메타데이터 카탈로그의 Business Glossary를 온톨로지로 쓸 때의 한계와 우회 SKOS 호환 레이어를 넣은 이유 NL2SQL 엔진의 User-Aware 설계와 Row-level Security CQ(Competency Questions)로 온톨로지를 사전 검증하는 법 Query Router에서 결정론적 vs 확률론적 라우팅을 나누는 기준 에이전트 태스크를 쪼개는 79% Rule 이론보다는 실제로 부딪힌 문제와 그걸 어떻게 풀었는지 — 또는 아직 못 풀었는지 — 를 쓸 예정이다.\n다음 글 DataNexus의 기술 스택 — 4개의 오픈소스를 이 조합으로 결정하기까지의 과정. 후보군에서 탈락한 것들과 그 이유를 정리한다.\nDataNexus를 설계하고 구축하는 과정을 기록합니다. GitHub | LinkedIn\n","wordCount":"887","inLanguage":"en","datePublished":"2026-02-16T00:00:00Z","dateModified":"2026-02-16T00:00:00Z","author":{"@type":"Person","name":"Junho Lee"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/"},"publisher":{"@type":"Person","name":"Junho Lee | DataNexus 구축 과정","logo":{"@type":"ImageObject","url":"https://biz-agentic-ai.github.io/favicon.svg"}}}</script></head><body id=top><script data-goatcounter=https://biz-agentic-ai.goatcounter.com/count async src=//gc.zgo.at/count.js></script><aside class=sidebar id=sidebar><div class=sidebar-inner><div class=sidebar-header><a href=https://biz-agentic-ai.github.io/ class=sidebar-logo><img src=/images/DataNexus_Logo.jpg alt=DataNexus class=sidebar-logo-img>
DataNexus
</a><span class=sidebar-subtitle>구축 과정</span></div><nav class=sidebar-nav><ul><li><a href=https://biz-agentic-ai.github.io/posts/>Posts</a></li><li><a href=https://biz-agentic-ai.github.io/tags/>Tags</a></li><li><a href=https://biz-agentic-ai.github.io/categories/>Categories</a></li><li><a href=https://biz-agentic-ai.github.io/about/>About</a></li></ul></nav><div class=sidebar-section><h3 class=sidebar-section-title>DataNexus Series</h3><ul><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/003-datahub-glossary-as-ontology/ title="3. DataHub Glossary를 온톨로지로 쓸 수 있을까">3. DataHub Glossary를 온톨로지로 쓸 수 있을까</a></li><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/002-architecture-decisions/ title="2. 4개의 오픈소스를 이 조합으로 결정하기까지">2. 4개의 오픈소스를 이 조합으로 결정하기까지</a></li><li><a href=https://biz-agentic-ai.github.io/posts/datanexus/001-why-datanexus/ title="1. 왜 DataNexus를 만드는가" class=active>1. 왜 DataNexus를 만드는가</a></li></ul></div><div class=sidebar-stats><div class=sidebar-stat-pill id=gc-container-pv style=display:none><span class="stat-dot stat-dot--pv"></span>
<span class=sidebar-stat-value id=gc-value-pv>-</span>
<span class=sidebar-stat-label>views</span></div><div class=sidebar-stat-pill id=gc-container-uv style=display:none><span class="stat-dot stat-dot--uv"></span>
<span class=sidebar-stat-value id=gc-value-uv>-</span>
<span class=sidebar-stat-label>visitors</span></div></div><script>(function(){var e=encodeURIComponent(location.pathname);fetch("https://biz-agentic-ai.goatcounter.com/counter/"+e+".json").then(function(e){return e.json()}).then(function(e){e.count&&(document.getElementById("gc-value-pv").textContent=e.count,document.getElementById("gc-container-pv").style.display=""),e.count_unique&&(document.getElementById("gc-value-uv").textContent=e.count_unique,document.getElementById("gc-container-uv").style.display="")}).catch(function(){})})()</script><div class=sidebar-dashboard-links id=dashboard-links><a href=https://biz-agentic-ai.goatcounter.com/ target=_blank rel=noopener><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
GoatCounter
</a><a href=https://analytics.google.com/analytics/web/ target=_blank rel=noopener><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 118 2.83"/><path d="M22 12A10 10 0 0012 2v10z"/></svg>
GA4 Dashboard</a></div><script>(function(){var e=document.getElementById("dashboard-links");localStorage.getItem("dn-admin")&&e.classList.add("visible"),document.querySelector(".sidebar-logo").addEventListener("dblclick",function(){var t=localStorage.getItem("dn-admin");t?(localStorage.removeItem("dn-admin"),e.classList.remove("visible")):(localStorage.setItem("dn-admin","1"),e.classList.add("visible"))})})()</script><div class=sidebar-footer><button id=sidebar-theme-toggle aria-label="Toggle theme">
<svg id="sidebar-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sidebar-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
<span>Toggle Theme</span></button></div></div></aside><button class=sidebar-toggle id=sidebar-toggle aria-label="Toggle sidebar"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class=sidebar-overlay id=sidebar-overlay></div><div class=site-wrapper><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://biz-agentic-ai.github.io/ accesskey=h title="Junho Lee | DataNexus 구축 과정 (Alt + H)">Junho Lee | DataNexus 구축 과정</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://biz-agentic-ai.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://biz-agentic-ai.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://biz-agentic-ai.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://biz-agentic-ai.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://biz-agentic-ai.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://biz-agentic-ai.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">1. 왜 DataNexus를 만드는가</h1><div class=post-meta><span title='2026-02-16 00:00:00 +0000 UTC'>February 16, 2026</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Junho Lee</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#vip-%ea%b8%b0%ec%a4%80%ec%9d%b4-%eb%ad%90%ec%a3%a0 aria-label="&ldquo;VIP 기준이 뭐죠?&rdquo;">&ldquo;VIP 기준이 뭐죠?&rdquo;</a></li><li><a href=#nl2sql%ec%9d%80-%eb%a7%8c%eb%8a%a5%ec%9d%b4-%ec%95%84%eb%8b%88%eb%8b%a4 aria-label="NL2SQL은 만능이 아니다">NL2SQL은 만능이 아니다</a></li><li><a href=#%ec%98%a8%ed%86%a8%eb%a1%9c%ec%a7%80%eb%9d%bc%eb%8a%94-%ec%84%a0%ed%83%9d aria-label="온톨로지라는 선택">온톨로지라는 선택</a></li><li><a href=#chatgpt%ec%97%90-ddl-%eb%b6%99%ec%97%ac%eb%84%a3%ec%9c%bc%eb%a9%b4-%eb%90%98%ec%a7%80-%ec%95%8a%eb%82%98 aria-label="&ldquo;ChatGPT에 DDL 붙여넣으면 되지 않나?&rdquo;">&ldquo;ChatGPT에 DDL 붙여넣으면 되지 않나?&rdquo;</a></li><li><a href=#datanexus%ea%b0%80-%ed%95%98%eb%a0%a4%eb%8a%94-%ea%b2%83 aria-label="DataNexus가 하려는 것">DataNexus가 하려는 것</a></li><li><a href=#%ec%99%9c-%ec%a7%80%ea%b8%88%ec%9d%b8%ea%b0%80 aria-label="왜 지금인가">왜 지금인가</a></li><li><a href=#%ec%9d%b4-%eb%b8%94%eb%a1%9c%ea%b7%b8%ec%9d%98-%eb%aa%a9%ec%a0%81 aria-label="이 블로그의 목적">이 블로그의 목적</a></li><li><a href=#%eb%8b%a4%ec%9d%8c-%ea%b8%80 aria-label="다음 글">다음 글</a></li></ul></div></details></div><div class=post-content><h2 id=vip-기준이-뭐죠>&ldquo;VIP 기준이 뭐죠?&rdquo;<a hidden class=anchor aria-hidden=true href=#vip-기준이-뭐죠>#</a></h2><p>작년에 유통사 BI Agent 프로젝트를 하면서 있었던 일이다. 자연어 질의/응답 시스템을 만들고 있었다.</p><p>현업 담당자가 테스트 중에 물었다. &ldquo;지난달 VIP 고객 매출 알려줘.&rdquo; 시스템이 숫자를 뱉어냈다. 담당자 표정이 좋지 않았다. &ldquo;이거 뭔가 이상한데요. VIP 기준이 우리 팀이랑 다른 것 같아요.&rdquo;</p><p>확인해 보니 마케팅의 VIP와 CRM의 VIP가 달랐다. 매출도 문제였다. 순매출이냐 총매출이냐에 따라 수억 단위로 차이가 난다.</p><p>이 장면은 이 프로젝트에서만 본 게 아니다.</p><p>60TB급 대기업 DW를 클라우드로 마이그레이션할 때도, 54억짜리 차세대 정보계를 다수 벤더와 1년 넘게 만들 때도 본질은 같았다. 차세대 정보계에서는 각 벤더가 정의하는 &ldquo;매출"과 &ldquo;원가"의 기준이 달라서, 데이터 정합성 맞추는 데만 몇 달을 날렸다. 수백 명이 투입된 프로젝트에서 용어 정의 불일치가 만드는 비용은 생각보다 크다.</p><p>20년 가까이 데이터 조직에서 일하면서 이 문제를 반복적으로 봤다. 테이블과 컬럼은 있다. 없는 건 맥락이다. &ldquo;이 컬럼이 비즈니스에서 뭘 의미하는지"가 기계가 읽을 수 있는 형태로 어디에도 정의되어 있지 않다.</p><p>DataNexus는 여기서 출발했다.</p><h2 id=nl2sql은-만능이-아니다>NL2SQL은 만능이 아니다<a hidden class=anchor aria-hidden=true href=#nl2sql은-만능이-아니다>#</a></h2><p>요즘 NL2SQL 도구가 많다. 자연어를 SQL로 바꿔주는 것 자체는 이미 된다.</p><p>문제는 실환경이다. 유통사 프로젝트에서 직접 겪었는데, 학술 벤치마크에서 좋은 점수를 받는 모델이 실제 DW에 연결하면 체감 정확도가 확 떨어졌다. 카드사·통신사·공공데이터까지 내외부 데이터를 통합해 놓은 환경이었다. LLM이 이 복잡도를 감당하지 못했다.</p><p>원인은 이전 프로젝트에서 이미 알고 있었다. 대기업 DW의 DDL을 열어보면 <code>T_CUST_MST.CUST_GRD_CD</code>, <code>T_ORD_DTL.SALE_AMT</code> 같은 약어 테이블이 수천 개다. 벤치마크 DB의 <code>customer_name</code>, <code>order_date</code>와는 차원이 다르다. 같은 회사인데 사업부마다 테이블 네이밍 규칙이 다르고, &ldquo;매출"이라는 단어 하나가 사업부마다 다른 테이블을 가리킨다.</p><p>파생 지표는 더 골치다. &ldquo;순매출"은 단일 컬럼이 아니다. <code>SUM(SALE_AMT) - SUM(RTN_AMT) - SUM(DC_AMT)</code> 같은 계산식인데, 이 공식은 어떤 DDL에도 안 적혀 있다. 현업 머릿속에 있거나, 잘해야 누군가의 Excel 정의서 어딘가에 묻혀 있다.</p><p>NL2SQL의 병목은 SQL 생성 능력이 아니다. 맥락의 부재다.</p><h2 id=온톨로지라는-선택>온톨로지라는 선택<a hidden class=anchor aria-hidden=true href=#온톨로지라는-선택>#</a></h2><p>대화형 BI 솔루션을 직접 만들면서 프롬프트 엔지니어링을 아무리 최적화해도 DDL만으로는 한계가 뚜렷했다. 멀티에이전트 아키텍처를 설계해 보기도 했다. 근본 문제는 LLM에게 줄 맥락 자체가 없다는 것이었다.</p><p>온톨로지를 붙이기로 했다.</p><p>거창한 학술 개념이 아니다. 실용적으로 보면 이런 것이다:</p><div class=highlight><pre tabindex=0 style=color:#c0caf5;background-color:#1a1b26;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#414868;font-style:italic># 순매출 용어 정의</span>
</span></span><span style=display:flex><span>- <span style=color:#bb9af7>term</span>: 순매출
</span></span><span style=display:flex><span>  <span style=color:#bb9af7>definition</span>: 총매출에서 반품과 에누리를 차감한 금액
</span></span><span style=display:flex><span>  <span style=color:#bb9af7>formula</span>: SUM(SALE_AMT) - SUM(RTN_AMT) - SUM(DC_AMT)
</span></span><span style=display:flex><span>  <span style=color:#bb9af7>synonyms</span>: [Net Sales, 순매출액, 넷세일즈]
</span></span><span style=display:flex><span>  <span style=color:#bb9af7>related_tables</span>: [T_SALE_DTL, T_RTN_DTL]
</span></span><span style=display:flex><span>  <span style=color:#bb9af7>owner</span>: 재무팀
</span></span></code></pre></div><p>이런 용어 정의를 메타데이터 카탈로그에 등록하고, NL2SQL 엔진의 RAG Store에 자동 동기화한다. LLM이 &ldquo;순매출"이라는 단어를 봤을 때 어떤 테이블의 어떤 컬럼을 어떤 계산식으로 조합해야 하는지 알게 되는 구조다.</p><p>처리 흐름은 이렇다:</p><p><img alt="DataNexus 질의 처리 흐름" loading=lazy src=/images/datanexus/query-flow.png></p><p>온톨로지 적용 전후 차이 — 내부 목표치가 EX(Execution Accuracy) 기준 +15~20%p 향상이다. MVP에서 EX 80% 이상, 안정화 단계에서 90% 이상. 이 수치가 현실적인지는 만들어 보면서 검증한다.</p><h2 id=chatgpt에-ddl-붙여넣으면-되지-않나>&ldquo;ChatGPT에 DDL 붙여넣으면 되지 않나?&rdquo;<a hidden class=anchor aria-hidden=true href=#chatgpt에-ddl-붙여넣으면-되지-않나>#</a></h2><p>자주 받는 질문이다. 안 된다.</p><p>대기업 DW의 DDL을 다 붙여넣으면 수십만 토큰이다. 내가 겪었던 프로젝트만 해도 테이블이 수천 개였다. 컨텍스트 윈도우에 다 못 넣는다. 넣더라도 LLM이 그 안에서 정확한 테이블을 골라내는 건 Needle-in-a-Haystack 문제다.</p><p>보안 이슈도 있다. 기업 내부 스키마를 외부 API에 보낼 수 없다. Row-level Security도 걸린다. 같은 &ldquo;매출"이라도 A그룹사 사용자와 B그룹사 사용자가 봐야 하는 범위가 다르다.</p><p>지속성이 가장 큰 문제다. DDL은 바뀐다. 비즈니스 용어 정의도 바뀐다. 차세대 정보계 프로젝트에서 EIS 오픈 후에도 단계별 릴리즈를 계속했는데, 매번 메타데이터가 변경됐다. 일회성 프롬프트가 아니라 변경을 감지해서 자동으로 RAG Store를 갱신하는 파이프라인이 필요하다.</p><p>별도의 플랫폼이 필요하다는 결론이었다.</p><h2 id=datanexus가-하려는-것>DataNexus가 하려는 것<a hidden class=anchor aria-hidden=true href=#datanexus가-하려는-것>#</a></h2><p>네 가지 컴포넌트로 구성된다.</p><p><img alt="DataNexus 전체 구성도" loading=lazy src=/images/datanexus/architecture.png></p><ul><li><strong>메타데이터 카탈로그</strong> — 비즈니스 용어 정의, 테이블 메타, 데이터 계보를 한 곳에서 관리한다. 온톨로지의 원천(Source of Truth).</li><li><strong>NL2SQL 엔진</strong> — 자연어를 SQL로 변환하되, 온톨로지에서 가져온 맥락을 프롬프트에 주입해서 정확도를 높인다.</li><li><strong>문서 지식엔진</strong> — 사업보고서, 정책문서 같은 비정형 데이터를 GraphRAG + 벡터 하이브리드로 검색한다.</li><li><strong>그래프 DB</strong> — 온톨로지를 지식 그래프로 저장하고, 그룹사별 Multi-DB로 데이터를 격리한다.</li></ul><p>한 줄로 요약하면: <strong>카탈로그에서 정의한 온톨로지가 NL2SQL과 문서검색에 자동 동기화되어, 사용자의 자연어 질문에 맥락을 입혀준다.</strong> 각 컴포넌트에 사용한 구체적인 오픈소스와 선정 이유는 다음 글에서 다룬다.</p><h2 id=왜-지금인가>왜 지금인가<a hidden class=anchor aria-hidden=true href=#왜-지금인가>#</a></h2><p>기술적 동기만으로 이 프로젝트를 시작한 건 아니다.</p><p>이전 직장에서 12년간 DW/BI 컨설팅을 했다. 팀을 2명에서 20명으로 키우고, 고객사 C레벨 대상 발표를 수십 회 하면서 &ldquo;왜 메타데이터가 중요한지&rdquo; 설명하는 데 커리어의 상당 부분을 썼다. 10년 넘게 느낀 건 — 이 문제가 사람의 설득만으로는 안 풀린다는 거였다. 시스템이 필요하다.</p><p>LLM이 나오면서 문제의 프레임이 바뀌었다.</p><p>범용 모델이 빠르게 좋아지고 있다. 단순 기획이나 문서 생성은 곧 commodity가 된다. 20년간 쌓아온 &ldquo;기업 데이터의 맥락을 이해하는 능력"이 가치를 유지하려면, 그 맥락을 구조화해서 기계에 주입하는 시스템이 있어야 한다.</p><p>DataNexus가 노리는 영역은 Non-verifiable Domain + Proprietary Data다. LLM 연구에서 Non-verifiable Domain이란 수학이나 코딩처럼 정답을 자동 검증할 수 있는 영역(Verifiable)의 반대편이다. 품질 평가가 주관적이고 외부에서 즉시 판별하기 어려운 영역. 기업 내부의 암묵적 지식, 역할별 해석 차이, 비공개 운영 데이터가 여기에 해당한다. 이런 데이터 위에 쌓는 경쟁 우위를 AI 전략에서는 Data Moat라고 부른다.</p><p>이 우위가 영구적이라고는 생각하지 않는다. 범용 모델의 일반화 속도를 DataNexus의 데이터 축적 속도가 앞서야 한다. 시간이 중요하다. 올해 상반기까지 MVP를 내고 데이터 축적 루프를 돌리는 게 목표다.</p><table><thead><tr><th>방어선 요소</th><th>구현 방향</th><th>축적 방식</th></tr></thead><tbody><tr><td>온톨로지 기반 맥락</td><td>메타데이터 카탈로그 + SKOS 호환</td><td>도메인 전문가의 용어 정제</td></tr><tr><td>역할별 해석 차이</td><td>페르소나별 응답 최적화</td><td>사용 패턴 기반 개인화</td></tr><tr><td>시간축 지식 그래프</td><td>Temporal Knowledge Graph</td><td>Episode 기반 실시간 축적</td></tr><tr><td>비공개 운영 데이터</td><td>그래프 DB 격리 + Row-level Security</td><td>그룹사별 독립 자산화</td></tr></tbody></table><h2 id=이-블로그의-목적>이 블로그의 목적<a hidden class=anchor aria-hidden=true href=#이-블로그의-목적>#</a></h2><p>DataNexus를 만들면서 부딪히는 의사결정, 삽질, 해결 과정을 기록한다.</p><p>다룰 것들:</p><ul><li>기술 스택을 선정한 과정 (후보군 탈락 사유 포함)</li><li>메타데이터 카탈로그의 Business Glossary를 온톨로지로 쓸 때의 한계와 우회</li><li>SKOS 호환 레이어를 넣은 이유</li><li>NL2SQL 엔진의 User-Aware 설계와 Row-level Security</li><li>CQ(Competency Questions)로 온톨로지를 사전 검증하는 법</li><li>Query Router에서 결정론적 vs 확률론적 라우팅을 나누는 기준</li><li>에이전트 태스크를 쪼개는 79% Rule</li></ul><p>이론보다는 실제로 부딪힌 문제와 그걸 어떻게 풀었는지 — 또는 아직 못 풀었는지 — 를 쓸 예정이다.</p><h2 id=다음-글>다음 글<a hidden class=anchor aria-hidden=true href=#다음-글>#</a></h2><p><a href=/posts/datanexus/002-architecture-decisions/>DataNexus의 기술 스택 — 4개의 오픈소스를 이 조합으로 결정하기까지의 과정. 후보군에서 탈락한 것들과 그 이유를 정리한다.</a></p><hr><p><em>DataNexus를 설계하고 구축하는 과정을 기록합니다. <a href=https://github.com/biz-agentic-ai>GitHub</a> | <a href=https://www.linkedin.com/in/leejuno/>LinkedIn</a></em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://biz-agentic-ai.github.io/tags/datanexus/>Datanexus</a></li><li><a href=https://biz-agentic-ai.github.io/tags/ontology/>Ontology</a></li><li><a href=https://biz-agentic-ai.github.io/tags/nl2sql/>Nl2sql</a></li><li><a href=https://biz-agentic-ai.github.io/tags/graphrag/>Graphrag</a></li></ul><nav class=paginav><a class=prev href=https://biz-agentic-ai.github.io/posts/datanexus/002-architecture-decisions/><span class=title>« Prev</span><br><span>2. 4개의 오픈소스를 이 조합으로 결정하기까지</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://biz-agentic-ai.github.io/>Junho Lee | DataNexus 구축 과정</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></div><script>(function(){const n=document.getElementById("sidebar-toggle"),e=document.getElementById("sidebar"),t=document.getElementById("sidebar-overlay");n&&e&&(n.addEventListener("click",function(){e.classList.toggle("open"),t.classList.toggle("open")}),t.addEventListener("click",function(){e.classList.remove("open"),t.classList.remove("open")}));const s=document.getElementById("sidebar-theme-toggle");s&&s.addEventListener("click",function(){document.body.classList.toggle("dark"),localStorage.setItem("pref-theme",document.body.classList.contains("dark")?"dark":"light")})})()</script></body></html>