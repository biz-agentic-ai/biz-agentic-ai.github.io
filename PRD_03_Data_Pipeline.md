## 4. ë°ì´í„° íŒŒì´í”„ë¼ì¸ ë° ê±°ë²„ë„ŒìŠ¤ (Data Ops & Mesh)

### 4.1 Data Mesh ì•„í‚¤í…ì²˜ ë„ì…
- **Human-in-the-loop:** í˜„ì—… ë„ë©”ì¸ ì „ë¬¸ê°€ê°€ DataHubì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´(Glossary)ì™€ ì†Œìœ ê¶Œ(Ownership)ì„ ê´€ë¦¬
- **Sync Pipeline:** DataHub ë³€ê²½ ì‚¬í•­ ê°ì§€ ì‹œ ApeRAG/Vanna AI ì¸ë±ì‹± íŒŒì´í”„ë¼ì¸ íŠ¸ë¦¬ê±°

### 4.2 ë°ì´í„° ì¤€ë¹„ (Preparation)
- **ì´ˆê¸° êµ¬ì¶•:** ì‚¬ë‚´ í…Œì´ë¸” DDL, ë©”íƒ€ ì •ë³´, ê¸°ì¡´ ì¿¼ë¦¬ ë¡œê·¸ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ì´ˆê¸° ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶•
- **Few-shot ì˜ˆì œ:** ê³ í’ˆì§ˆì˜ ì§ˆë¬¸-SQL ìŒì„ êµ¬ì¶•í•˜ì—¬ í”„ë¡¬í”„íŠ¸ì— ë™ì ìœ¼ë¡œ ì‚½ì…

### 4.2+ ë°ì´í„° ì¤€ë¹„ ë¡œë“œë§µ (ë³´ê°•: ë¦¬ë·° ë³´ê³ ì„œ Â§1-3 ë°˜ì˜)

> **âš ï¸ ë°ì´í„° ì¤€ë¹„ ê³„íš ë¶€ì¬ (ë¦¬ë·° ë³´ê³ ì„œ Â§1-3: ê°€ì¥ ì‹œê¸‰í•œ ë³´ì™„ ì‚¬í•­)**

ê¸°ì¡´ PRD Â§4.2ì—ì„œ "ì´ˆê¸° êµ¬ì¶•"ê³¼ "Few-shot ì˜ˆì œ"ë¥¼ ì–¸ê¸‰í•˜ì§€ë§Œ, êµ¬ì²´ì  ì‹¤í–‰ ê³„íšì´ ë¶€ì¬í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” Phase 0.5ì—ì„œ ë°˜ë“œì‹œ ì„ í–‰ë˜ì–´ì•¼ í•  ë°ì´í„° ì¤€ë¹„ ë¡œë“œë§µì…ë‹ˆë‹¤.

#### 4.2.1 Phase 0.5 ë°ì´í„° ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ | ë‹´ë‹¹ | ì˜ˆìƒ ê³µìˆ˜ |
|------|------|--------|------|----------|
| **D-1** | ëŒ€ìƒ DM DB ëª©ë¡ í™•ì • | DB ì ‘ì† ì •ë³´ ì‹œíŠ¸ | DBA + í˜„ì—… | 2ì¼ |
| **D-2** | DDL ìˆ˜ì§‘ ë° ì •ì œ | í…Œì´ë¸”/ì»¬ëŸ¼ DDL íŒŒì¼ | DBA | 3ì¼ |
| **D-3** | í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´ 20ê°œ ì„ ì • | MVP Glossary Term ëª©ë¡ | í˜„ì—… ë„ë©”ì¸ ì „ë¬¸ê°€ | 3ì¼ |
| **D-4** | ê¸°ì¡´ ì¿¼ë¦¬ ë¡œê·¸ ë¶„ì„ | Top-50 ë¹ˆì¶œ ì¿¼ë¦¬ ëª©ë¡ | DA/DE | 5ì¼ |
| **D-5** | ì§ˆë¬¸-SQL ìŒ 30ê°œ êµ¬ì¶• | Few-shot Training Set | DA + í˜„ì—… | 5ì¼ |
| **D-6** | í‰ê°€ ë°ì´í„°ì…‹ êµ¬ì¶• | eval_queries.json (50+ ìŒ) | DA | 3ì¼ |
| **D-7** | DataHub Ingestion í…ŒìŠ¤íŠ¸ | Ingestion ì„±ê³µ ë¡œê·¸ | DE | 2ì¼ |

**ì´ ì˜ˆìƒ ê³µìˆ˜:** ì•½ 3ì£¼ (ë³‘ë ¬ ì§„í–‰ ì‹œ 2ì£¼)

#### 4.2.2 MVP Glossary Term ì„ ì • ê¸°ì¤€

Phase 1 MVPì—ì„œëŠ” ì „ì²´ ì˜¨í†¨ë¡œì§€ê°€ ì•„ë‹Œ **í•µì‹¬ 20ê°œ ìš©ì–´**ë¡œ ì‹œì‘í•©ë‹ˆë‹¤:

```yaml
# mvp_glossary_terms.yaml
selection_criteria:
  - í˜„ì—… ì§ˆë¬¸ ë¹ˆë„ ìƒìœ„ (ì¿¼ë¦¬ ë¡œê·¸ ê¸°ë°˜)
  - ê³„ì‚°ì‹ì´ í¬í•¨ëœ íŒŒìƒ ì§€í‘œ (ìˆœë§¤ì¶œ, ì˜ì—…ì´ìµ ë“±)
  - ë¶€ì„œ ê°„ ì¤‘ì˜ì„±ì´ ìˆëŠ” ìš©ì–´ (ê³ ê°, ë§¤ì¶œ ë“±)
  
mvp_terms:  # ì•„ë˜ëŠ” ì˜ˆì‹œ 13ê°œ (ì‹¤ì œ ì„ ì • ì‹œ ìµœì†Œ 20ê°œë¡œ í™•ì¥)
  financial:
    - ìˆœë§¤ì¶œ (Net Sales)
    - ì´ë§¤ì¶œ (Gross Sales)
    - ì˜ì—…ì´ìµ (Operating Profit)
    - ë§¤ì¶œì›ê°€ (COGS)
    - ë°˜í’ˆ (Returns)
  customer:
    - VIPê³ ê° (VIP Customer)
    - ê³ ê°ìœ í˜• (Customer Type)
    - êµ¬ë… (Subscription)
  product:
    - ìƒí’ˆë¶„ë¥˜ (Product Category)
    - SKU
  operational:
    - ì í¬ (Store)
    - ì£¼ë¬¸ (Order)
    - ë°°ì†¡ (Delivery)
  # [TODO: Phase 0.5 D-3] í˜„ì—… í˜‘ì˜ í›„ 7ê°œ ì´ìƒ ì¶”ê°€í•˜ì—¬ ìµœì†Œ 20ê°œ í™•ë³´
  # í›„ë³´: í• ì¸, ì—ëˆ„ë¦¬, ì¬ê³ , ë§¤ì¥ìœ í˜•, íšŒì›ë“±ê¸‰, ê²°ì œìˆ˜ë‹¨, ì¹´í…Œê³ ë¦¬ ë“±
  # ë‹´ë‹¹: ë„ë©”ì¸ ì „ë¬¸ê°€ + ë°ì´í„° ì˜¤ë„ˆ, Â§4.2.1 ì²´í¬ë¦¬ìŠ¤íŠ¸ D-3 ì°¸ì¡°
```

#### 4.2.3 Few-shot ì˜ˆì œ í’ˆì§ˆ ê¸°ì¤€

| ê¸°ì¤€ | ì„¤ëª… | ìµœì†Œ ìš”ê±´ |
|------|------|----------|
| **ë‹¤ì–‘ì„±** | ë‹¨ìˆœ ì¡°íšŒ ~ ë³µí•© ì§‘ê³„ ~ ì¡°ì¸ ì§ˆì˜ ê· í˜• | ê° ìœ í˜• ìµœì†Œ 5ê°œ |
| **ì •í™•ì„±** | DBAê°€ ê²€ì¦í•œ ì •ë‹µ SQL | ì‹¤í–‰ ê²°ê³¼ ì¼ì¹˜ 100% |
| **í˜„ì—… í‘œí˜„** | ì‹¤ì œ í˜„ì—…ì´ ì‚¬ìš©í•˜ëŠ” ìì—°ì–´ í‘œí˜„ | ì¿¼ë¦¬ ë¡œê·¸ ê¸°ë°˜ |
| **ì˜¨í†¨ë¡œì§€ í™œìš©** | Glossary Termì´ ìì—°ì–´ì— í¬í•¨ | 70% ì´ìƒ |

---

### 4.3 ì˜¨í†¨ë¡œì§€-RAG í†µí•© íŒŒì´í”„ë¼ì¸
ëª©ì : ê´€ë¦¬ìê°€ DM(ë°ì´í„° ë§ˆíŠ¸) DBë¥¼ ì§€ì •í•˜ë©´, DataHubì— í…Œì´ë¸”/ë·° ë©”íƒ€ë°ì´í„°ê°€ ìë™ ìˆ˜ì§‘ë˜ê³ , ì •ì˜ëœ ì˜¨í†¨ë¡œì§€(Glossary Terms)ê°€ Vanna AI RAGì— ë™ê¸°í™”ë˜ì–´ NL2SQL ì¿¼ë¦¬ í’ˆì§ˆì´ í–¥ìƒë©ë‹ˆë‹¤.

#### 4.3.1 ì „ì²´ í”Œë¡œìš° ê°œìš”

| ë‹¨ê³„ | ì‘ì—… ì„¤ëª… | ê¸°ìˆ  ìš”ì†Œ |
| :--- | :--- | :--- |
| â‘  DB ì—°ê²° ì„¤ì • | ê´€ë¦¬ìê°€ Admin UIì—ì„œ DM DB ì ‘ì† ì •ë³´ ë“±ë¡ | Admin API, ì•”í˜¸í™” Credential ì €ì¥ |
| â‘¡ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ | DataHub Ingestionìœ¼ë¡œ í…Œì´ë¸”/ë·°/ì»¬ëŸ¼ ìë™ ìˆ˜ì§‘ | DataHub Ingestion Framework (YAML) |
| â‘¢ ì¹´íƒˆë¡œê·¸ í‘œì‹œ | DataHub UI/APIì—ì„œ ìˆ˜ì§‘ëœ ê°ì²´ ëª©ë¡ ì¡°íšŒ | DataHub GraphQL API |
| â‘£ ì˜¨í†¨ë¡œì§€ ì •ì˜ | ê´€ë¦¬ìê°€ Glossary Term ìƒì„± ë° í…Œì´ë¸”/ì»¬ëŸ¼/ì„¸ë§Œí‹± ë·° ë§¤í•‘ | DataHub Glossary, GraphQL Mutation |
| â‘¤ í’ˆì§ˆ ê²€ì¦ | ì •ì˜ ì¶©ëŒ, ë™ì˜ì–´ ì¤‘ë³µ, ìˆœí™˜ ì°¸ì¡°, ê³ ì•„ ì°¸ì¡° ë“± ê²€ì¦ ë° **ì˜¨í†¨ë¡œì§€ ìì²´ í’ˆì§ˆ ì§€í‘œ(Structural/Semantic/Functional) í‰ê°€** | Validation Engine, Fuzzy Matching, **LLM-as-a-Judge, Graph Data Science** |
| â‘¥ RAG ë™ê¸°í™” | DDL + Glossary + Sample SQLì„ Vanna AIì— í•™ìŠµ ë° ApeRAGì— Taxonomyë¡œ ì£¼ì… | Sync Pipeline, Vanna train API, ApeRAG GraphIndex, Prompt Template |
| â‘¦ ì§ˆì˜ ì‹œ ì»¨í…ìŠ¤íŠ¸ í™œìš© | ì‚¬ìš©ì ì§ˆë¬¸ì— ì˜¨í†¨ë¡œì§€ í¬í•¨ ì»¨í…ìŠ¤íŠ¸ë¡œ SQL/Cypher ìƒì„± | Vanna generate_sql, RAG Retrieval |

> **ğŸ“Œ íŒŒì´í”„ë¼ì¸ ìƒì„¸ ë¬¸ì„œ ìœ„ì¹˜:**
> - â‘ ~â‘£ ë‹¨ê³„ ìƒì„¸: ë³¸ íŒŒì¼ Â§4.3.2~4.3.4 (ì•„ë˜ ì°¸ì¡°)
> - â‘¤~â‘¥ ë‹¨ê³„ ìƒì„¸ (í’ˆì§ˆ ê²€ì¦, Entity Resolution, DataHubâ†’Vanna ë™ê¸°í™”): [PRD_04b_Ontology_Extended.md Â§4.3.5~4.3.8](./PRD_04b_Ontology_Extended.md)
> - â‘¦ ë‹¨ê³„ ìƒì„¸ (ì§ˆì˜ ì‹œ ì»¨í…ìŠ¤íŠ¸ í™œìš©): [PRD_02_Core_Features_Agent.md Â§3.1~3.5](./PRD_02_Core_Features_Agent.md)

#### 4.3.2 ê´€ë¦¬ì ë©”ë‰´ ì„¤ê³„
**A. DB ì—°ê²° ê´€ë¦¬ (Data Source Management)**

| ë©”ë‰´ í•­ëª© | UI ì»´í¬ë„ŒíŠ¸ | ê¸°ëŠ¥ ì„¤ëª… |
| :--- | :--- | :--- |
| DB ì†ŒìŠ¤ ëª©ë¡ | DataGrid, StatusBadge | ë“±ë¡ëœ DM DB ëª©ë¡ ì¡°íšŒ, ì—°ê²° ìƒíƒœ í‘œì‹œ (ì •ìƒ/ì˜¤ë¥˜/ë™ê¸°í™”ì¤‘) |
| DB ì†ŒìŠ¤ ë“±ë¡ | Form, Select, Input | í”Œë«í¼ ì„ íƒ (Oracle/PostgreSQL/BigQuery ë“±), ì ‘ì† ì •ë³´ ì…ë ¥, ì—°ê²° í…ŒìŠ¤íŠ¸ |
| ìŠ¤í‚¤ë§ˆ ì„ íƒ | TreeView, Checkbox | ìˆ˜ì§‘ ëŒ€ìƒ ìŠ¤í‚¤ë§ˆ/í…Œì´ë¸” íŒ¨í„´ ì§€ì • (ì˜ˆ: MART_%, DW_%) |
| ìˆ˜ì§‘ ì‹¤í–‰ | Button, ProgressBar | DataHub Ingestion ì¦‰ì‹œ ì‹¤í–‰, ì§„í–‰ ìƒí™© í‘œì‹œ |
| ìˆ˜ì§‘ ìŠ¤ì¼€ì¤„ | CronEditor, Toggle | ìë™ ìˆ˜ì§‘ ì£¼ê¸° ì„¤ì • (ë§¤ì¼ 02:00 ë“±) |

**B. ì˜¨í†¨ë¡œì§€ í¸ì§‘ê¸° (Ontology Editor)**

| ë©”ë‰´ í•­ëª© | UI ì»´í¬ë„ŒíŠ¸ | ê¸°ëŠ¥ ì„¤ëª… |
| :--- | :--- | :--- |
| ìš©ì–´ì§‘ ëª©ë¡ | DataGrid, Search | Glossary Term ì „ì²´ ëª©ë¡, ê²€ìƒ‰/í•„í„°ë§ |
| ìš©ì–´ ìƒì„±/í¸ì§‘ | Form, RichTextEditor | ìš©ì–´ëª…, ì •ì˜(ê³„ì‚°ì‹ í¬í•¨), ë™ì˜ì–´, ê´€ë ¨ ë§í¬ ì…ë ¥ |
| í…Œì´ë¸”/ì»¬ëŸ¼ ì—°ê²° | TreeView, DragDrop | Glossary Termì„ íŠ¹ì • í…Œì´ë¸” ë˜ëŠ” ì»¬ëŸ¼ì— ë§¤í•‘ |
| ìš©ì–´ ê³„ì¸µ ê´€ë¦¬ | TreeEditor | Glossary Node(ê·¸ë£¹) ìƒì„± ë° ìš©ì–´ ê³„ì¸µí™” |
| ê´€ê³„ ì •ì˜ | RelationEditor, Graph | IsA/HasA/RelatedTo ë“± ìš©ì–´ ê°„ ê´€ê³„ ì„¤ì •, ê·¸ë˜í”„ ì‹œê°í™” |
| ì¼ê´„ Import | FileUpload, Preview | Excel/YAML íŒŒì¼ë¡œ ìš©ì–´ ì¼ê´„ ë“±ë¡ |

**C. RAG í•™ìŠµ ê´€ë¦¬ (RAG Training Manager)**

| ë©”ë‰´ í•­ëª© | UI ì»´í¬ë„ŒíŠ¸ | ê¸°ëŠ¥ ì„¤ëª… |
| :--- | :--- | :--- |
| Training Data ëª©ë¡ | DataGrid, Filter | Vanna AIì— í•™ìŠµëœ ë°ì´í„° ëª©ë¡ (DDL/Doc/SQL êµ¬ë¶„) |
| DDL ê´€ë¦¬ | CodeEditor, Sync | DataHubì—ì„œ ì¶”ì¶œëœ DDL í™•ì¸, ìˆ˜ë™ í¸ì§‘, ì¬í•™ìŠµ |
| Documentation | List, Editor | Glossary Term â†’ Documentation ë³€í™˜ ê²°ê³¼ í™•ì¸/í¸ì§‘ |
| Sample SQL ê´€ë¦¬ | CodeEditor, Test | ì§ˆë¬¸-SQL ìŒ ë“±ë¡, SQL ì‹¤í–‰ í…ŒìŠ¤íŠ¸ |
| ë™ê¸°í™” ìƒíƒœ | StatusBoard, Log | DataHub â†’ Vanna ë™ê¸°í™” ì´ë ¥ ë° ìƒíƒœ ëª¨ë‹ˆí„°ë§ |
| ìˆ˜ë™ ë™ê¸°í™” | Button, Confirm | ì „ì²´ ë˜ëŠ” ì„ íƒëœ í…Œì´ë¸”ì˜ RAG ë°ì´í„° ì¦‰ì‹œ ë™ê¸°í™” |

#### 4.3.3 DataHub Ingestion ì„¤ì •
ê´€ë¦¬ìê°€ DB ì†ŒìŠ¤ë¥¼ ë“±ë¡í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ YAML Recipeê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤:

```yaml
# datahub_ingestion_recipe.yaml (ìë™ ìƒì„± ì˜ˆì‹œ)
source:
 type: oracle # ë˜ëŠ” postgresql, bigquery, snowflake ë“±
 config:
    host_port: "${DB_HOST}:${DB_PORT}"
    database: "GRS_DM"
    schema_pattern:
      allow: ["MART_%", "DW_%"]
    include_tables: true
    include_views: true
    profiling:
      enabled: true # ì»¬ëŸ¼ í†µê³„ ìˆ˜ì§‘
sink:
 type: datahub-rest
 config:
    server: "http://datahub-gms:8080"
```

#### 4.3.4 Glossary Term ë°ì´í„° êµ¬ì¡°
ì˜¨í†¨ë¡œì§€ í¸ì§‘ê¸°ì—ì„œ ì •ì˜í•˜ëŠ” Glossary Termì˜ í•„ìˆ˜/ê¶Œì¥ í•„ë“œì…ë‹ˆë‹¤. ê´€ê³„ ì •ì˜ ë° ë™ì˜ì–´ í•„ë“œê°€ í™•ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.

âš ï¸ DataHubëŠ” synonyms í•„ë“œë¥¼ ê³µì‹ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì»¤ìŠ¤í…€ í•„ë“œë¡œ êµ¬í˜„í•˜ê±°ë‚˜ descriptionì— í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.

| í•„ë“œëª… | í•„ìˆ˜ ì—¬ë¶€ | ì˜ˆì‹œ | í™œìš© |
| :--- | :--- | :--- | :--- |
| name | í•„ìˆ˜ | ìˆœë§¤ì¶œ | Documentation ì œëª©, Entity ì´ë¦„ |
| definition | í•„ìˆ˜ | ì´ë§¤ì¶œì—ì„œ ë°˜í’ˆ, í• ì¸, ì—ëˆ„ë¦¬ë¥¼ ì°¨ê°í•œ ì‹¤ì œ ë§¤ì¶œì•¡ | Documentation ë³¸ë¬¸ |
| formula | ê¶Œì¥ | ìˆœë§¤ì¶œ = ì´ë§¤ì¶œ - ë°˜í’ˆ - í• ì¸ - ì—ëˆ„ë¦¬ | Documentationì— ê³„ì‚°ì‹ìœ¼ë¡œ í¬í•¨, **ì„¸ë§Œí‹± ë·° ì •ì˜** |
| synonyms (âš ï¸ ì»¤ìŠ¤í…€) | ê¶Œì¥ | ["Net Sales", "ì‹¤ë§¤ì¶œ", "ë„·ì„¸ì¼ì¦ˆ"] | âš ï¸ DataHub ë¯¸ì§€ì› â€” ì»¤ìŠ¤í…€ í•„ë“œë¡œ êµ¬í˜„, Entity Resolutionì— í™œìš© |
| linked_columns | ê¶Œì¥ | GRS_DM.MART_SALES.NET_SALES_AMT | DDL-Documentation ì—°ê²° íŒíŠ¸ |
| domain | ì„ íƒ | Sales (ì˜ì—…) | RAG ê²€ìƒ‰ ì‹œ ë„ë©”ì¸ í•„í„°ë§, **ë‹¤ì¤‘ ë„ë©”ì¸ ì¤‘ì˜ì„± í•´ê²°** |
| relatedTerms | ê¶Œì¥ | [{urn, relation_type}] | DataHub ê³µì‹ ê´€ê³„ (IsA/HasA/RelatedTo), **ì„¸ë¶„í™”ëœ ê´€ê³„ ì •ì˜** |
| validity_period (ì»¤ìŠ¤í…€) | ì„ íƒ | {"start": "2026-01-01", "end": "2026-12-31"} | **ì‹œê°„ì  ì˜¨í†¨ë¡œì§€ ê´€ë¦¬** |
| source_affinity (ì»¤ìŠ¤í…€) | ì„ íƒ | "ì •í˜•", "ë¹„ì •í˜•", "í•˜ì´ë¸Œë¦¬ë“œ" | **ì˜¨í†¨ë¡œì§€ ê¸°ë°˜ ì§ˆì˜ ë¶„í•´ ì „ëµ** |
| uri | ìë™ìƒì„± | urn:li:glossaryTerm:ìˆœë§¤ì¶œ | ê³µí†µ ì‹ë³„ì (Vanna+ApeRAG í†µí•©ìš©) |

#### 4.3.4.1 DataHub ê³µì‹ ê´€ê³„ ìœ í˜•

| ê´€ê³„ ìœ í˜• | DataHub í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
| :--- | :--- | :--- | :--- |
| IsA | isRelatedTerms | ìƒì†/ì¼ì¢…(kind-of) ê´€ê³„ | Email IsA PersonalInformation |
| HasA | hasRelatedTerms | í¬í•¨(contains) ê´€ê³„ | Address HasA ZipCode |
| Values | values | ê°’ ëª©ë¡ ê´€ê³„ | CustomerType Values [VIP, Regular, New] |
| RelatedTo | relatedTerms | ì¼ë°˜ ì—°ê´€ ê´€ê³„ | ìˆœë§¤ì¶œ RelatedTo ë°˜í’ˆ |

â€» ì¶œì²˜: DataHub ê³µì‹ ë¬¸ì„œ (GlossaryTerm ë©”íƒ€ë°ì´í„° ìŠ¤í‚¤ë§ˆ), DataHub GraphQL API
